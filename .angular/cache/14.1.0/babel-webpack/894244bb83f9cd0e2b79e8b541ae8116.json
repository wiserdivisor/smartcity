{"ast":null,"code":"/**\n * @module ol/style/IconImage\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport { asString } from '../color.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { shared as iconImageCache } from './IconImageCache.js';\nimport { listenImage } from '../Image.js';\n/**\n * @type {CanvasRenderingContext2D}\n */\n\nvar taintedTestContext = null;\n\nvar IconImage =\n/** @class */\nfunction (_super) {\n  __extends(IconImage, _super);\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n\n\n  function IconImage(image, src, size, crossOrigin, imageState, color) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n\n\n    _this.hitDetectionImage_ = null;\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n\n    _this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      /** @type {HTMLImageElement} */\n      _this.image_.crossOrigin = crossOrigin;\n    }\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n\n\n    _this.canvas_ = {};\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n\n    _this.color_ = color;\n    /**\n     * @private\n     * @type {?function():void}\n     */\n\n    _this.unlisten_ = null;\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n\n    _this.imageState_ = imageState;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    _this.size_ = size;\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n\n    _this.src_ = src;\n    /**\n     * @private\n     */\n\n    _this.tainted_;\n    return _this;\n  }\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n\n\n  IconImage.prototype.isTainted_ = function () {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      if (!taintedTestContext) {\n        taintedTestContext = createCanvasContext2D(1, 1);\n      }\n\n      taintedTestContext.drawImage(this.image_, 0, 0);\n\n      try {\n        taintedTestContext.getImageData(0, 0, 1, 1);\n        this.tainted_ = false;\n      } catch (e) {\n        taintedTestContext = null;\n        this.tainted_ = true;\n      }\n    }\n\n    return this.tainted_ === true;\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.dispatchChangeEvent_ = function () {\n    this.dispatchEvent(EventType.CHANGE);\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.handleImageError_ = function () {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.handleImageLoad_ = function () {\n    this.imageState_ = ImageState.LOADED;\n\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    } else {\n      this.size_ = [this.image_.width, this.image_.height];\n    }\n\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n\n\n  IconImage.prototype.getImage = function (pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Image or Canvas element.\n   */\n\n\n  IconImage.prototype.getPixelRatio = function (pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? pixelRatio : 1;\n  };\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  IconImage.prototype.getImageState = function () {\n    return this.imageState_;\n  };\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n\n\n  IconImage.prototype.getHitDetectionImage = function () {\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        var width = this.size_[0];\n        var height = this.size_[1];\n        var context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n\n    return this.hitDetectionImage_;\n  };\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  IconImage.prototype.getSize = function () {\n    return this.size_;\n  };\n  /**\n   * @return {string|undefined} Image src.\n   */\n\n\n  IconImage.prototype.getSrc = function () {\n    return this.src_;\n  };\n  /**\n   * Load not yet loaded URI.\n   */\n\n\n  IconImage.prototype.load = function () {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n\n      try {\n        /** @type {HTMLImageElement} */\n        this.image_.src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n\n      this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n    }\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @private\n   */\n\n\n  IconImage.prototype.replaceColor_ = function (pixelRatio) {\n    if (!this.color_ || this.canvas_[pixelRatio] || this.imageState_ !== ImageState.LOADED) {\n      return;\n    }\n\n    var canvas = document.createElement('canvas');\n    this.canvas_[pixelRatio] = canvas;\n    canvas.width = Math.ceil(this.image_.width * pixelRatio);\n    canvas.height = Math.ceil(this.image_.height * pixelRatio);\n    var ctx = canvas.getContext('2d');\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.drawImage(this.image_, 0, 0);\n    ctx.globalCompositeOperation = 'multiply'; // Internet Explorer 11 does not support the multiply operation.\n    // If the canvas is tainted in Internet Explorer this still produces\n    // a solid color image with the shape of the icon.\n\n    if (ctx.globalCompositeOperation === 'multiply' || this.isTainted_()) {\n      ctx.fillStyle = asString(this.color_);\n      ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n      ctx.globalCompositeOperation = 'destination-in';\n      ctx.drawImage(this.image_, 0, 0);\n    } else {\n      var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      var data = imgData.data;\n      var r = this.color_[0] / 255.0;\n      var g = this.color_[1] / 255.0;\n      var b = this.color_[2] / 255.0;\n      var a = this.color_[3];\n\n      for (var i = 0, ii = data.length; i < ii; i += 4) {\n        data[i] *= r;\n        data[i + 1] *= g;\n        data[i + 2] *= b;\n        data[i + 3] *= a;\n      }\n\n      ctx.putImageData(imgData, 0, 0);\n    }\n  };\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n\n\n  IconImage.prototype.unlistenImage_ = function () {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  };\n\n  return IconImage;\n}(EventTarget);\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\n\n\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  var iconImage = iconImageCache.get(src, crossOrigin, color);\n\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n\n  return iconImage;\n}\nexport default IconImage;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","EventTarget","EventType","ImageState","asString","createCanvasContext2D","shared","iconImageCache","listenImage","taintedTestContext","IconImage","_super","image","src","size","crossOrigin","imageState","color","_this","hitDetectionImage_","image_","Image","canvas_","color_","unlisten_","imageState_","size_","src_","tainted_","isTainted_","undefined","LOADED","drawImage","getImageData","e","dispatchChangeEvent_","dispatchEvent","CHANGE","handleImageError_","ERROR","unlistenImage_","handleImageLoad_","width","height","getImage","pixelRatio","replaceColor_","getPixelRatio","getImageState","getHitDetectionImage","context","fillRect","canvas","getSize","getSrc","load","IDLE","LOADING","bind","document","createElement","Math","ceil","ctx","getContext","scale","globalCompositeOperation","fillStyle","imgData","data","r","g","a","i","ii","length","putImageData","get","iconImage","set"],"sources":["/home/asura/github/smartcity/node_modules/ol/style/IconImage.js"],"sourcesContent":["/**\n * @module ol/style/IconImage\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport { asString } from '../color.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { shared as iconImageCache } from './IconImageCache.js';\nimport { listenImage } from '../Image.js';\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar taintedTestContext = null;\nvar IconImage = /** @class */ (function (_super) {\n    __extends(IconImage, _super);\n    /**\n     * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n     * @param {string|undefined} src Src.\n     * @param {import(\"../size.js\").Size} size Size.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../ImageState.js\").default} imageState Image state.\n     * @param {import(\"../color.js\").Color} color Color.\n     */\n    function IconImage(image, src, size, crossOrigin, imageState, color) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.hitDetectionImage_ = null;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = !image ? new Image() : image;\n        if (crossOrigin !== null) {\n            /** @type {HTMLImageElement} */ (_this.image_).crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {Object<number, HTMLCanvasElement>}\n         */\n        _this.canvas_ = {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = color;\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"../ImageState.js\").default}\n         */\n        _this.imageState_ = imageState;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = size;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         */\n        _this.tainted_;\n        return _this;\n    }\n    /**\n     * @private\n     * @return {boolean} The image canvas is tainted.\n     */\n    IconImage.prototype.isTainted_ = function () {\n        if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n            if (!taintedTestContext) {\n                taintedTestContext = createCanvasContext2D(1, 1);\n            }\n            taintedTestContext.drawImage(this.image_, 0, 0);\n            try {\n                taintedTestContext.getImageData(0, 0, 1, 1);\n                this.tainted_ = false;\n            }\n            catch (e) {\n                taintedTestContext = null;\n                this.tainted_ = true;\n            }\n        }\n        return this.tainted_ === true;\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.dispatchChangeEvent_ = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageError_ = function () {\n        this.imageState_ = ImageState.ERROR;\n        this.unlistenImage_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageLoad_ = function () {\n        this.imageState_ = ImageState.LOADED;\n        if (this.size_) {\n            this.image_.width = this.size_[0];\n            this.image_.height = this.size_[1];\n        }\n        else {\n            this.size_ = [this.image_.width, this.image_.height];\n        }\n        this.unlistenImage_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     */\n    IconImage.prototype.getImage = function (pixelRatio) {\n        this.replaceColor_(pixelRatio);\n        return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Image or Canvas element.\n     */\n    IconImage.prototype.getPixelRatio = function (pixelRatio) {\n        this.replaceColor_(pixelRatio);\n        return this.canvas_[pixelRatio] ? pixelRatio : 1;\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    IconImage.prototype.getImageState = function () {\n        return this.imageState_;\n    };\n    /**\n     * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n     */\n    IconImage.prototype.getHitDetectionImage = function () {\n        if (!this.hitDetectionImage_) {\n            if (this.isTainted_()) {\n                var width = this.size_[0];\n                var height = this.size_[1];\n                var context = createCanvasContext2D(width, height);\n                context.fillRect(0, 0, width, height);\n                this.hitDetectionImage_ = context.canvas;\n            }\n            else {\n                this.hitDetectionImage_ = this.image_;\n            }\n        }\n        return this.hitDetectionImage_;\n    };\n    /**\n     * Get the size of the icon (in pixels).\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    IconImage.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * @return {string|undefined} Image src.\n     */\n    IconImage.prototype.getSrc = function () {\n        return this.src_;\n    };\n    /**\n     * Load not yet loaded URI.\n     */\n    IconImage.prototype.load = function () {\n        if (this.imageState_ == ImageState.IDLE) {\n            this.imageState_ = ImageState.LOADING;\n            try {\n                /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n            }\n            catch (e) {\n                this.handleImageError_();\n            }\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @private\n     */\n    IconImage.prototype.replaceColor_ = function (pixelRatio) {\n        if (!this.color_ ||\n            this.canvas_[pixelRatio] ||\n            this.imageState_ !== ImageState.LOADED) {\n            return;\n        }\n        var canvas = document.createElement('canvas');\n        this.canvas_[pixelRatio] = canvas;\n        canvas.width = Math.ceil(this.image_.width * pixelRatio);\n        canvas.height = Math.ceil(this.image_.height * pixelRatio);\n        var ctx = canvas.getContext('2d');\n        ctx.scale(pixelRatio, pixelRatio);\n        ctx.drawImage(this.image_, 0, 0);\n        ctx.globalCompositeOperation = 'multiply';\n        // Internet Explorer 11 does not support the multiply operation.\n        // If the canvas is tainted in Internet Explorer this still produces\n        // a solid color image with the shape of the icon.\n        if (ctx.globalCompositeOperation === 'multiply' || this.isTainted_()) {\n            ctx.fillStyle = asString(this.color_);\n            ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n            ctx.globalCompositeOperation = 'destination-in';\n            ctx.drawImage(this.image_, 0, 0);\n        }\n        else {\n            var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            var data = imgData.data;\n            var r = this.color_[0] / 255.0;\n            var g = this.color_[1] / 255.0;\n            var b = this.color_[2] / 255.0;\n            var a = this.color_[3];\n            for (var i = 0, ii = data.length; i < ii; i += 4) {\n                data[i] *= r;\n                data[i + 1] *= g;\n                data[i + 2] *= b;\n                data[i + 3] *= a;\n            }\n            ctx.putImageData(imgData, 0, 0);\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    IconImage.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return IconImage;\n}(EventTarget));\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n    var iconImage = iconImageCache.get(src, crossOrigin, color);\n    if (!iconImage) {\n        iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n        iconImageCache.set(src, crossOrigin, color, iconImage);\n    }\n    return iconImage;\n}\nexport default IconImage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}