{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/control/OverviewMap\n */\n\n\nimport CompositeMapRenderer from '../renderer/Composite.js';\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport MapEventType from '../MapEventType.js';\nimport MapProperty from '../MapProperty.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport Overlay from '../Overlay.js';\nimport PluggableMap from '../PluggableMap.js';\nimport View from '../View.js';\nimport ViewProperty from '../ViewProperty.js';\nimport { CLASS_COLLAPSED, CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { containsExtent, equals as equalsExtent, getBottomRight, getTopLeft, scaleFromCenter } from '../extent.js';\nimport { listen, listenOnce } from '../events.js';\nimport { fromExtent as polygonFromExtent } from '../geom/Polygon.js';\nimport { replaceNode } from '../dom.js';\n/**\n * Maximum width and/or height extent ratio that determines when the overview\n * map should be zoomed out.\n * @type {number}\n */\n\nvar MAX_RATIO = 0.75;\n/**\n * Minimum width and/or height extent ratio that determines when the overview\n * map should be zoomed in.\n * @type {number}\n */\n\nvar MIN_RATIO = 0.1;\n\nvar ControlledMap =\n/** @class */\nfunction (_super) {\n  __extends(ControlledMap, _super);\n\n  function ControlledMap() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ControlledMap.prototype.createRenderer = function () {\n    return new CompositeMapRenderer(this);\n  };\n\n  return ControlledMap;\n}(PluggableMap);\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-overviewmap'] CSS class name.\n * @property {boolean} [collapsed=true] Whether the control should start collapsed or not (expanded).\n * @property {string|HTMLElement} [collapseLabel='‹'] Text label to use for the\n * expanded overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {boolean} [collapsible=true] Whether the control can be collapsed or not.\n * @property {string|HTMLElement} [label='›'] Text label to use for the collapsed\n * overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {Array<import(\"../layer/Base.js\").default>|import(\"../Collection.js\").default<import(\"../layer/Base.js\").default>} [layers]\n * Layers for the overview map.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {boolean} [rotateWithView=false] Whether the control view should rotate with the main map view.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {string} [tipLabel='Overview map'] Text label to use for the button tip.\n * @property {View} [view] Custom view for the overview map (should use same projection as main map). If not provided,\n * a default view with the same projection as the main map will be used.\n */\n\n/**\n * Create a new control with a map acting as an overview map for another\n * defined map.\n *\n * @api\n */\n\n\nvar OverviewMap =\n/** @class */\nfunction (_super) {\n  __extends(OverviewMap, _super);\n  /**\n   * @param {Options} [opt_options] OverviewMap options.\n   */\n\n\n  function OverviewMap(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    _this = _super.call(this, {\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target\n    }) || this;\n    /**\n     * @private\n     */\n\n    _this.boundHandleRotationChanged_ = _this.handleRotationChanged_.bind(_this);\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n    _this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.collapsible_ = options.collapsible !== undefined ? options.collapsible : true;\n\n    if (!_this.collapsible_) {\n      _this.collapsed_ = false;\n    }\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n\n    _this.rotateWithView_ = options.rotateWithView !== undefined ? options.rotateWithView : false;\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent|undefined}\n     */\n\n    _this.viewExtent_ = undefined;\n    var className = options.className !== undefined ? options.className : 'ol-overviewmap';\n    var tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Overview map';\n    var collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u2039';\n\n    if (typeof collapseLabel === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      _this.collapseLabel_ = document.createElement('span');\n      _this.collapseLabel_.textContent = collapseLabel;\n    } else {\n      _this.collapseLabel_ = collapseLabel;\n    }\n\n    var label = options.label !== undefined ? options.label : '\\u203A';\n\n    if (typeof label === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      _this.label_ = document.createElement('span');\n      _this.label_.textContent = label;\n    } else {\n      _this.label_ = label;\n    }\n\n    var activeLabel = _this.collapsible_ && !_this.collapsed_ ? _this.collapseLabel_ : _this.label_;\n    var button = document.createElement('button');\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(activeLabel);\n    button.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n\n    _this.ovmapDiv_ = document.createElement('div');\n    _this.ovmapDiv_.className = 'ol-overviewmap-map';\n    /**\n     * Explicitly given view to be used instead of a view derived from the main map.\n     * @type {View}\n     * @private\n     */\n\n    _this.view_ = options.view;\n    /**\n     * @type {ControlledMap}\n     * @private\n     */\n\n    _this.ovmap_ = new ControlledMap({\n      view: options.view\n    });\n    var ovmap = _this.ovmap_;\n\n    if (options.layers) {\n      options.layers.forEach(function (layer) {\n        ovmap.addLayer(layer);\n      });\n    }\n\n    var box = document.createElement('div');\n    box.className = 'ol-overviewmap-box';\n    box.style.boxSizing = 'border-box';\n    /**\n     * @type {import(\"../Overlay.js\").default}\n     * @private\n     */\n\n    _this.boxOverlay_ = new Overlay({\n      position: [0, 0],\n      positioning: 'center-center',\n      element: box\n    });\n\n    _this.ovmap_.addOverlay(_this.boxOverlay_);\n\n    var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL + (_this.collapsed_ && _this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') + (_this.collapsible_ ? '' : ' ol-uncollapsible');\n    var element = _this.element;\n    element.className = cssClasses;\n    element.appendChild(_this.ovmapDiv_);\n    element.appendChild(button);\n    /* Interactive map */\n\n    var scope = _this;\n    var overlay = _this.boxOverlay_;\n\n    var overlayBox = _this.boxOverlay_.getElement();\n    /* Functions definition */\n\n\n    var computeDesiredMousePosition = function (mousePosition) {\n      return {\n        clientX: mousePosition.clientX,\n        clientY: mousePosition.clientY\n      };\n    };\n\n    var move = function (event) {\n      var position =\n      /** @type {?} */\n      computeDesiredMousePosition(event);\n      var coordinates = ovmap.getEventCoordinateInternal(\n      /** @type {MouseEvent} */\n      position);\n      overlay.setPosition(coordinates);\n    };\n\n    var endMoving = function (event) {\n      var coordinates = ovmap.getEventCoordinateInternal(event);\n      scope.getMap().getView().setCenterInternal(coordinates);\n      window.removeEventListener('mousemove', move);\n      window.removeEventListener('mouseup', endMoving);\n    };\n    /* Binding */\n\n\n    overlayBox.addEventListener('mousedown', function () {\n      window.addEventListener('mousemove', move);\n      window.addEventListener('mouseup', endMoving);\n    });\n    return _this;\n  }\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Pass `null` to just remove the control from the current map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default|null} map Map.\n   * @api\n   */\n\n\n  OverviewMap.prototype.setMap = function (map) {\n    var oldMap = this.getMap();\n\n    if (map === oldMap) {\n      return;\n    }\n\n    if (oldMap) {\n      var oldView = oldMap.getView();\n\n      if (oldView) {\n        this.unbindView_(oldView);\n      }\n\n      this.ovmap_.setTarget(null);\n    }\n\n    _super.prototype.setMap.call(this, map);\n\n    if (map) {\n      this.ovmap_.setTarget(this.ovmapDiv_);\n      this.listenerKeys.push(listen(map, ObjectEventType.PROPERTYCHANGE, this.handleMapPropertyChange_, this));\n      var view = map.getView();\n\n      if (view) {\n        this.bindView_(view);\n\n        if (view.isDef()) {\n          this.ovmap_.updateSize();\n          this.resetExtent_();\n        }\n      }\n\n      if (!this.ovmap_.isRendered()) {\n        this.updateBoxAfterOvmapIsRendered_();\n      }\n    }\n  };\n  /**\n   * Handle map property changes.  This only deals with changes to the map's view.\n   * @param {import(\"../Object.js\").ObjectEvent} event The propertychange event.\n   * @private\n   */\n\n\n  OverviewMap.prototype.handleMapPropertyChange_ = function (event) {\n    if (event.key === MapProperty.VIEW) {\n      var oldView =\n      /** @type {import(\"../View.js\").default} */\n      event.oldValue;\n\n      if (oldView) {\n        this.unbindView_(oldView);\n      }\n\n      var newView = this.getMap().getView();\n      this.bindView_(newView);\n    } else if (!this.ovmap_.isRendered() && (event.key === MapProperty.TARGET || event.key === MapProperty.SIZE)) {\n      this.ovmap_.updateSize();\n    }\n  };\n  /**\n   * Register listeners for view property changes.\n   * @param {import(\"../View.js\").default} view The view.\n   * @private\n   */\n\n\n  OverviewMap.prototype.bindView_ = function (view) {\n    if (!this.view_) {\n      // Unless an explicit view definition was given, derive default from whatever main map uses.\n      var newView = new View({\n        projection: view.getProjection()\n      });\n      this.ovmap_.setView(newView);\n    }\n\n    view.addChangeListener(ViewProperty.ROTATION, this.boundHandleRotationChanged_); // Sync once with the new view\n\n    this.handleRotationChanged_();\n  };\n  /**\n   * Unregister listeners for view property changes.\n   * @param {import(\"../View.js\").default} view The view.\n   * @private\n   */\n\n\n  OverviewMap.prototype.unbindView_ = function (view) {\n    view.removeChangeListener(ViewProperty.ROTATION, this.boundHandleRotationChanged_);\n  };\n  /**\n   * Handle rotation changes to the main map.\n   * @private\n   */\n\n\n  OverviewMap.prototype.handleRotationChanged_ = function () {\n    if (this.rotateWithView_) {\n      this.ovmap_.getView().setRotation(this.getMap().getView().getRotation());\n    }\n  };\n  /**\n   * Reset the overview map extent if the box size (width or\n   * height) is less than the size of the overview map size times minRatio\n   * or is greater than the size of the overview size times maxRatio.\n   *\n   * If the map extent was not reset, the box size can fits in the defined\n   * ratio sizes. This method then checks if is contained inside the overview\n   * map current extent. If not, recenter the overview map to the current\n   * main map center location.\n   * @private\n   */\n\n\n  OverviewMap.prototype.validateExtent_ = function () {\n    var map = this.getMap();\n    var ovmap = this.ovmap_;\n\n    if (!map.isRendered() || !ovmap.isRendered()) {\n      return;\n    }\n\n    var mapSize =\n    /** @type {import(\"../size.js\").Size} */\n    map.getSize();\n    var view = map.getView();\n    var extent = view.calculateExtentInternal(mapSize);\n\n    if (this.viewExtent_ && equalsExtent(extent, this.viewExtent_)) {\n      // repeats of the same extent may indicate constraint conflicts leading to an endless cycle\n      return;\n    }\n\n    this.viewExtent_ = extent;\n    var ovmapSize =\n    /** @type {import(\"../size.js\").Size} */\n    ovmap.getSize();\n    var ovview = ovmap.getView();\n    var ovextent = ovview.calculateExtentInternal(ovmapSize);\n    var topLeftPixel = ovmap.getPixelFromCoordinateInternal(getTopLeft(extent));\n    var bottomRightPixel = ovmap.getPixelFromCoordinateInternal(getBottomRight(extent));\n    var boxWidth = Math.abs(topLeftPixel[0] - bottomRightPixel[0]);\n    var boxHeight = Math.abs(topLeftPixel[1] - bottomRightPixel[1]);\n    var ovmapWidth = ovmapSize[0];\n    var ovmapHeight = ovmapSize[1];\n\n    if (boxWidth < ovmapWidth * MIN_RATIO || boxHeight < ovmapHeight * MIN_RATIO || boxWidth > ovmapWidth * MAX_RATIO || boxHeight > ovmapHeight * MAX_RATIO) {\n      this.resetExtent_();\n    } else if (!containsExtent(ovextent, extent)) {\n      this.recenter_();\n    }\n  };\n  /**\n   * Reset the overview map extent to half calculated min and max ratio times\n   * the extent of the main map.\n   * @private\n   */\n\n\n  OverviewMap.prototype.resetExtent_ = function () {\n    if (MAX_RATIO === 0 || MIN_RATIO === 0) {\n      return;\n    }\n\n    var map = this.getMap();\n    var ovmap = this.ovmap_;\n    var mapSize =\n    /** @type {import(\"../size.js\").Size} */\n    map.getSize();\n    var view = map.getView();\n    var extent = view.calculateExtentInternal(mapSize);\n    var ovview = ovmap.getView(); // get how many times the current map overview could hold different\n    // box sizes using the min and max ratio, pick the step in the middle used\n    // to calculate the extent from the main map to set it to the overview map,\n\n    var steps = Math.log(MAX_RATIO / MIN_RATIO) / Math.LN2;\n    var ratio = 1 / (Math.pow(2, steps / 2) * MIN_RATIO);\n    scaleFromCenter(extent, ratio);\n    ovview.fitInternal(polygonFromExtent(extent));\n  };\n  /**\n   * Set the center of the overview map to the map center without changing its\n   * resolution.\n   * @private\n   */\n\n\n  OverviewMap.prototype.recenter_ = function () {\n    var map = this.getMap();\n    var ovmap = this.ovmap_;\n    var view = map.getView();\n    var ovview = ovmap.getView();\n    ovview.setCenterInternal(view.getCenterInternal());\n  };\n  /**\n   * Update the box using the main map extent\n   * @private\n   */\n\n\n  OverviewMap.prototype.updateBox_ = function () {\n    var map = this.getMap();\n    var ovmap = this.ovmap_;\n\n    if (!map.isRendered() || !ovmap.isRendered()) {\n      return;\n    }\n\n    var mapSize =\n    /** @type {import(\"../size.js\").Size} */\n    map.getSize();\n    var view = map.getView();\n    var ovview = ovmap.getView();\n    var rotation = this.rotateWithView_ ? 0 : -view.getRotation();\n    var overlay = this.boxOverlay_;\n    var box = this.boxOverlay_.getElement();\n    var center = view.getCenterInternal();\n    var resolution = view.getResolution();\n    var ovresolution = ovview.getResolution();\n    var width = mapSize[0] * resolution / ovresolution;\n    var height = mapSize[1] * resolution / ovresolution; // set position using center coordinates\n\n    overlay.setPosition(center); // set box size calculated from map extent size and overview map resolution\n\n    if (box) {\n      box.style.width = width + 'px';\n      box.style.height = height + 'px';\n      var transform = 'rotate(' + rotation + 'rad)';\n      box.style.transform = transform;\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  OverviewMap.prototype.updateBoxAfterOvmapIsRendered_ = function () {\n    if (this.ovmapPostrenderKey_) {\n      return;\n    }\n\n    this.ovmapPostrenderKey_ = listenOnce(this.ovmap_, MapEventType.POSTRENDER, function (event) {\n      delete this.ovmapPostrenderKey_;\n      this.updateBox_();\n    }, this);\n  };\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n\n\n  OverviewMap.prototype.handleClick_ = function (event) {\n    event.preventDefault();\n    this.handleToggle_();\n  };\n  /**\n   * @private\n   */\n\n\n  OverviewMap.prototype.handleToggle_ = function () {\n    this.element.classList.toggle(CLASS_COLLAPSED);\n\n    if (this.collapsed_) {\n      replaceNode(this.collapseLabel_, this.label_);\n    } else {\n      replaceNode(this.label_, this.collapseLabel_);\n    }\n\n    this.collapsed_ = !this.collapsed_; // manage overview map if it had not been rendered before and control\n    // is expanded\n\n    var ovmap = this.ovmap_;\n\n    if (!this.collapsed_) {\n      if (ovmap.isRendered()) {\n        this.viewExtent_ = undefined;\n        ovmap.render();\n        return;\n      }\n\n      ovmap.updateSize();\n      this.resetExtent_();\n      this.updateBoxAfterOvmapIsRendered_();\n    }\n  };\n  /**\n   * Return `true` if the overview map is collapsible, `false` otherwise.\n   * @return {boolean} True if the widget is collapsible.\n   * @api\n   */\n\n\n  OverviewMap.prototype.getCollapsible = function () {\n    return this.collapsible_;\n  };\n  /**\n   * Set whether the overview map should be collapsible.\n   * @param {boolean} collapsible True if the widget is collapsible.\n   * @api\n   */\n\n\n  OverviewMap.prototype.setCollapsible = function (collapsible) {\n    if (this.collapsible_ === collapsible) {\n      return;\n    }\n\n    this.collapsible_ = collapsible;\n    this.element.classList.toggle('ol-uncollapsible');\n\n    if (!collapsible && this.collapsed_) {\n      this.handleToggle_();\n    }\n  };\n  /**\n   * Collapse or expand the overview map according to the passed parameter. Will\n   * not do anything if the overview map isn't collapsible or if the current\n   * collapsed state is already the one requested.\n   * @param {boolean} collapsed True if the widget is collapsed.\n   * @api\n   */\n\n\n  OverviewMap.prototype.setCollapsed = function (collapsed) {\n    if (!this.collapsible_ || this.collapsed_ === collapsed) {\n      return;\n    }\n\n    this.handleToggle_();\n  };\n  /**\n   * Determine if the overview map is collapsed.\n   * @return {boolean} The overview map is collapsed.\n   * @api\n   */\n\n\n  OverviewMap.prototype.getCollapsed = function () {\n    return this.collapsed_;\n  };\n  /**\n   * Return `true` if the overview map view can rotate, `false` otherwise.\n   * @return {boolean} True if the control view can rotate.\n   * @api\n   */\n\n\n  OverviewMap.prototype.getRotateWithView = function () {\n    return this.rotateWithView_;\n  };\n  /**\n   * Set whether the overview map view should rotate with the main map view.\n   * @param {boolean} rotateWithView True if the control view should rotate.\n   * @api\n   */\n\n\n  OverviewMap.prototype.setRotateWithView = function (rotateWithView) {\n    if (this.rotateWithView_ === rotateWithView) {\n      return;\n    }\n\n    this.rotateWithView_ = rotateWithView;\n\n    if (this.getMap().getView().getRotation() !== 0) {\n      if (this.rotateWithView_) {\n        this.handleRotationChanged_();\n      } else {\n        this.ovmap_.getView().setRotation(0);\n      }\n\n      this.viewExtent_ = undefined;\n      this.validateExtent_();\n      this.updateBox_();\n    }\n  };\n  /**\n   * Return the overview map.\n   * @return {import(\"../PluggableMap.js\").default} Overview map.\n   * @api\n   */\n\n\n  OverviewMap.prototype.getOverviewMap = function () {\n    return this.ovmap_;\n  };\n  /**\n   * Update the overview map element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n\n\n  OverviewMap.prototype.render = function (mapEvent) {\n    this.validateExtent_();\n    this.updateBox_();\n  };\n\n  return OverviewMap;\n}(Control);\n\nexport default OverviewMap;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","CompositeMapRenderer","Control","EventType","MapEventType","MapProperty","ObjectEventType","Overlay","PluggableMap","View","ViewProperty","CLASS_COLLAPSED","CLASS_CONTROL","CLASS_UNSELECTABLE","containsExtent","equals","equalsExtent","getBottomRight","getTopLeft","scaleFromCenter","listen","listenOnce","fromExtent","polygonFromExtent","replaceNode","MAX_RATIO","MIN_RATIO","ControlledMap","_super","apply","arguments","createRenderer","OverviewMap","opt_options","_this","options","element","document","createElement","render","target","boundHandleRotationChanged_","handleRotationChanged_","bind","collapsed_","collapsed","undefined","collapsible_","collapsible","rotateWithView_","rotateWithView","viewExtent_","className","tipLabel","collapseLabel","collapseLabel_","textContent","label","label_","activeLabel","button","setAttribute","title","appendChild","addEventListener","CLICK","handleClick_","ovmapDiv_","view_","view","ovmap_","ovmap","layers","forEach","layer","addLayer","box","style","boxSizing","boxOverlay_","position","positioning","addOverlay","cssClasses","scope","overlay","overlayBox","getElement","computeDesiredMousePosition","mousePosition","clientX","clientY","move","event","coordinates","getEventCoordinateInternal","setPosition","endMoving","getMap","getView","setCenterInternal","window","removeEventListener","setMap","map","oldMap","oldView","unbindView_","setTarget","listenerKeys","push","PROPERTYCHANGE","handleMapPropertyChange_","bindView_","isDef","updateSize","resetExtent_","isRendered","updateBoxAfterOvmapIsRendered_","key","VIEW","oldValue","newView","TARGET","SIZE","projection","getProjection","setView","addChangeListener","ROTATION","removeChangeListener","setRotation","getRotation","validateExtent_","mapSize","getSize","extent","calculateExtentInternal","ovmapSize","ovview","ovextent","topLeftPixel","getPixelFromCoordinateInternal","bottomRightPixel","boxWidth","Math","abs","boxHeight","ovmapWidth","ovmapHeight","recenter_","steps","log","LN2","ratio","pow","fitInternal","getCenterInternal","updateBox_","rotation","center","resolution","getResolution","ovresolution","width","height","transform","ovmapPostrenderKey_","POSTRENDER","preventDefault","handleToggle_","classList","toggle","getCollapsible","setCollapsible","setCollapsed","getCollapsed","getRotateWithView","setRotateWithView","getOverviewMap","mapEvent"],"sources":["/home/asura/github/smartcity/node_modules/ol/control/OverviewMap.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/OverviewMap\n */\nimport CompositeMapRenderer from '../renderer/Composite.js';\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport MapEventType from '../MapEventType.js';\nimport MapProperty from '../MapProperty.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport Overlay from '../Overlay.js';\nimport PluggableMap from '../PluggableMap.js';\nimport View from '../View.js';\nimport ViewProperty from '../ViewProperty.js';\nimport { CLASS_COLLAPSED, CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { containsExtent, equals as equalsExtent, getBottomRight, getTopLeft, scaleFromCenter, } from '../extent.js';\nimport { listen, listenOnce } from '../events.js';\nimport { fromExtent as polygonFromExtent } from '../geom/Polygon.js';\nimport { replaceNode } from '../dom.js';\n/**\n * Maximum width and/or height extent ratio that determines when the overview\n * map should be zoomed out.\n * @type {number}\n */\nvar MAX_RATIO = 0.75;\n/**\n * Minimum width and/or height extent ratio that determines when the overview\n * map should be zoomed in.\n * @type {number}\n */\nvar MIN_RATIO = 0.1;\nvar ControlledMap = /** @class */ (function (_super) {\n    __extends(ControlledMap, _super);\n    function ControlledMap() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ControlledMap.prototype.createRenderer = function () {\n        return new CompositeMapRenderer(this);\n    };\n    return ControlledMap;\n}(PluggableMap));\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-overviewmap'] CSS class name.\n * @property {boolean} [collapsed=true] Whether the control should start collapsed or not (expanded).\n * @property {string|HTMLElement} [collapseLabel='‹'] Text label to use for the\n * expanded overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {boolean} [collapsible=true] Whether the control can be collapsed or not.\n * @property {string|HTMLElement} [label='›'] Text label to use for the collapsed\n * overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {Array<import(\"../layer/Base.js\").default>|import(\"../Collection.js\").default<import(\"../layer/Base.js\").default>} [layers]\n * Layers for the overview map.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {boolean} [rotateWithView=false] Whether the control view should rotate with the main map view.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {string} [tipLabel='Overview map'] Text label to use for the button tip.\n * @property {View} [view] Custom view for the overview map (should use same projection as main map). If not provided,\n * a default view with the same projection as the main map will be used.\n */\n/**\n * Create a new control with a map acting as an overview map for another\n * defined map.\n *\n * @api\n */\nvar OverviewMap = /** @class */ (function (_super) {\n    __extends(OverviewMap, _super);\n    /**\n     * @param {Options} [opt_options] OverviewMap options.\n     */\n    function OverviewMap(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n            target: options.target,\n        }) || this;\n        /**\n         * @private\n         */\n        _this.boundHandleRotationChanged_ = _this.handleRotationChanged_.bind(_this);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.collapsed_ =\n            options.collapsed !== undefined ? options.collapsed : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.collapsible_ =\n            options.collapsible !== undefined ? options.collapsible : true;\n        if (!_this.collapsible_) {\n            _this.collapsed_ = false;\n        }\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.rotateWithView_ =\n            options.rotateWithView !== undefined ? options.rotateWithView : false;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent|undefined}\n         */\n        _this.viewExtent_ = undefined;\n        var className = options.className !== undefined ? options.className : 'ol-overviewmap';\n        var tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Overview map';\n        var collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u2039';\n        if (typeof collapseLabel === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.collapseLabel_ = document.createElement('span');\n            _this.collapseLabel_.textContent = collapseLabel;\n        }\n        else {\n            _this.collapseLabel_ = collapseLabel;\n        }\n        var label = options.label !== undefined ? options.label : '\\u203A';\n        if (typeof label === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.label_ = document.createElement('span');\n            _this.label_.textContent = label;\n        }\n        else {\n            _this.label_ = label;\n        }\n        var activeLabel = _this.collapsible_ && !_this.collapsed_ ? _this.collapseLabel_ : _this.label_;\n        var button = document.createElement('button');\n        button.setAttribute('type', 'button');\n        button.title = tipLabel;\n        button.appendChild(activeLabel);\n        button.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n        /**\n         * @type {HTMLElement}\n         * @private\n         */\n        _this.ovmapDiv_ = document.createElement('div');\n        _this.ovmapDiv_.className = 'ol-overviewmap-map';\n        /**\n         * Explicitly given view to be used instead of a view derived from the main map.\n         * @type {View}\n         * @private\n         */\n        _this.view_ = options.view;\n        /**\n         * @type {ControlledMap}\n         * @private\n         */\n        _this.ovmap_ = new ControlledMap({\n            view: options.view,\n        });\n        var ovmap = _this.ovmap_;\n        if (options.layers) {\n            options.layers.forEach(function (layer) {\n                ovmap.addLayer(layer);\n            });\n        }\n        var box = document.createElement('div');\n        box.className = 'ol-overviewmap-box';\n        box.style.boxSizing = 'border-box';\n        /**\n         * @type {import(\"../Overlay.js\").default}\n         * @private\n         */\n        _this.boxOverlay_ = new Overlay({\n            position: [0, 0],\n            positioning: 'center-center',\n            element: box,\n        });\n        _this.ovmap_.addOverlay(_this.boxOverlay_);\n        var cssClasses = className +\n            ' ' +\n            CLASS_UNSELECTABLE +\n            ' ' +\n            CLASS_CONTROL +\n            (_this.collapsed_ && _this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n            (_this.collapsible_ ? '' : ' ol-uncollapsible');\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(_this.ovmapDiv_);\n        element.appendChild(button);\n        /* Interactive map */\n        var scope = _this;\n        var overlay = _this.boxOverlay_;\n        var overlayBox = _this.boxOverlay_.getElement();\n        /* Functions definition */\n        var computeDesiredMousePosition = function (mousePosition) {\n            return {\n                clientX: mousePosition.clientX,\n                clientY: mousePosition.clientY,\n            };\n        };\n        var move = function (event) {\n            var position = /** @type {?} */ (computeDesiredMousePosition(event));\n            var coordinates = ovmap.getEventCoordinateInternal(\n            /** @type {MouseEvent} */ (position));\n            overlay.setPosition(coordinates);\n        };\n        var endMoving = function (event) {\n            var coordinates = ovmap.getEventCoordinateInternal(event);\n            scope.getMap().getView().setCenterInternal(coordinates);\n            window.removeEventListener('mousemove', move);\n            window.removeEventListener('mouseup', endMoving);\n        };\n        /* Binding */\n        overlayBox.addEventListener('mousedown', function () {\n            window.addEventListener('mousemove', move);\n            window.addEventListener('mouseup', endMoving);\n        });\n        return _this;\n    }\n    /**\n     * Remove the control from its current map and attach it to the new map.\n     * Pass `null` to just remove the control from the current map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default|null} map Map.\n     * @api\n     */\n    OverviewMap.prototype.setMap = function (map) {\n        var oldMap = this.getMap();\n        if (map === oldMap) {\n            return;\n        }\n        if (oldMap) {\n            var oldView = oldMap.getView();\n            if (oldView) {\n                this.unbindView_(oldView);\n            }\n            this.ovmap_.setTarget(null);\n        }\n        _super.prototype.setMap.call(this, map);\n        if (map) {\n            this.ovmap_.setTarget(this.ovmapDiv_);\n            this.listenerKeys.push(listen(map, ObjectEventType.PROPERTYCHANGE, this.handleMapPropertyChange_, this));\n            var view = map.getView();\n            if (view) {\n                this.bindView_(view);\n                if (view.isDef()) {\n                    this.ovmap_.updateSize();\n                    this.resetExtent_();\n                }\n            }\n            if (!this.ovmap_.isRendered()) {\n                this.updateBoxAfterOvmapIsRendered_();\n            }\n        }\n    };\n    /**\n     * Handle map property changes.  This only deals with changes to the map's view.\n     * @param {import(\"../Object.js\").ObjectEvent} event The propertychange event.\n     * @private\n     */\n    OverviewMap.prototype.handleMapPropertyChange_ = function (event) {\n        if (event.key === MapProperty.VIEW) {\n            var oldView = /** @type {import(\"../View.js\").default} */ (event.oldValue);\n            if (oldView) {\n                this.unbindView_(oldView);\n            }\n            var newView = this.getMap().getView();\n            this.bindView_(newView);\n        }\n        else if (!this.ovmap_.isRendered() &&\n            (event.key === MapProperty.TARGET || event.key === MapProperty.SIZE)) {\n            this.ovmap_.updateSize();\n        }\n    };\n    /**\n     * Register listeners for view property changes.\n     * @param {import(\"../View.js\").default} view The view.\n     * @private\n     */\n    OverviewMap.prototype.bindView_ = function (view) {\n        if (!this.view_) {\n            // Unless an explicit view definition was given, derive default from whatever main map uses.\n            var newView = new View({\n                projection: view.getProjection(),\n            });\n            this.ovmap_.setView(newView);\n        }\n        view.addChangeListener(ViewProperty.ROTATION, this.boundHandleRotationChanged_);\n        // Sync once with the new view\n        this.handleRotationChanged_();\n    };\n    /**\n     * Unregister listeners for view property changes.\n     * @param {import(\"../View.js\").default} view The view.\n     * @private\n     */\n    OverviewMap.prototype.unbindView_ = function (view) {\n        view.removeChangeListener(ViewProperty.ROTATION, this.boundHandleRotationChanged_);\n    };\n    /**\n     * Handle rotation changes to the main map.\n     * @private\n     */\n    OverviewMap.prototype.handleRotationChanged_ = function () {\n        if (this.rotateWithView_) {\n            this.ovmap_.getView().setRotation(this.getMap().getView().getRotation());\n        }\n    };\n    /**\n     * Reset the overview map extent if the box size (width or\n     * height) is less than the size of the overview map size times minRatio\n     * or is greater than the size of the overview size times maxRatio.\n     *\n     * If the map extent was not reset, the box size can fits in the defined\n     * ratio sizes. This method then checks if is contained inside the overview\n     * map current extent. If not, recenter the overview map to the current\n     * main map center location.\n     * @private\n     */\n    OverviewMap.prototype.validateExtent_ = function () {\n        var map = this.getMap();\n        var ovmap = this.ovmap_;\n        if (!map.isRendered() || !ovmap.isRendered()) {\n            return;\n        }\n        var mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n        var view = map.getView();\n        var extent = view.calculateExtentInternal(mapSize);\n        if (this.viewExtent_ && equalsExtent(extent, this.viewExtent_)) {\n            // repeats of the same extent may indicate constraint conflicts leading to an endless cycle\n            return;\n        }\n        this.viewExtent_ = extent;\n        var ovmapSize = /** @type {import(\"../size.js\").Size} */ (ovmap.getSize());\n        var ovview = ovmap.getView();\n        var ovextent = ovview.calculateExtentInternal(ovmapSize);\n        var topLeftPixel = ovmap.getPixelFromCoordinateInternal(getTopLeft(extent));\n        var bottomRightPixel = ovmap.getPixelFromCoordinateInternal(getBottomRight(extent));\n        var boxWidth = Math.abs(topLeftPixel[0] - bottomRightPixel[0]);\n        var boxHeight = Math.abs(topLeftPixel[1] - bottomRightPixel[1]);\n        var ovmapWidth = ovmapSize[0];\n        var ovmapHeight = ovmapSize[1];\n        if (boxWidth < ovmapWidth * MIN_RATIO ||\n            boxHeight < ovmapHeight * MIN_RATIO ||\n            boxWidth > ovmapWidth * MAX_RATIO ||\n            boxHeight > ovmapHeight * MAX_RATIO) {\n            this.resetExtent_();\n        }\n        else if (!containsExtent(ovextent, extent)) {\n            this.recenter_();\n        }\n    };\n    /**\n     * Reset the overview map extent to half calculated min and max ratio times\n     * the extent of the main map.\n     * @private\n     */\n    OverviewMap.prototype.resetExtent_ = function () {\n        if (MAX_RATIO === 0 || MIN_RATIO === 0) {\n            return;\n        }\n        var map = this.getMap();\n        var ovmap = this.ovmap_;\n        var mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n        var view = map.getView();\n        var extent = view.calculateExtentInternal(mapSize);\n        var ovview = ovmap.getView();\n        // get how many times the current map overview could hold different\n        // box sizes using the min and max ratio, pick the step in the middle used\n        // to calculate the extent from the main map to set it to the overview map,\n        var steps = Math.log(MAX_RATIO / MIN_RATIO) / Math.LN2;\n        var ratio = 1 / (Math.pow(2, steps / 2) * MIN_RATIO);\n        scaleFromCenter(extent, ratio);\n        ovview.fitInternal(polygonFromExtent(extent));\n    };\n    /**\n     * Set the center of the overview map to the map center without changing its\n     * resolution.\n     * @private\n     */\n    OverviewMap.prototype.recenter_ = function () {\n        var map = this.getMap();\n        var ovmap = this.ovmap_;\n        var view = map.getView();\n        var ovview = ovmap.getView();\n        ovview.setCenterInternal(view.getCenterInternal());\n    };\n    /**\n     * Update the box using the main map extent\n     * @private\n     */\n    OverviewMap.prototype.updateBox_ = function () {\n        var map = this.getMap();\n        var ovmap = this.ovmap_;\n        if (!map.isRendered() || !ovmap.isRendered()) {\n            return;\n        }\n        var mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n        var view = map.getView();\n        var ovview = ovmap.getView();\n        var rotation = this.rotateWithView_ ? 0 : -view.getRotation();\n        var overlay = this.boxOverlay_;\n        var box = this.boxOverlay_.getElement();\n        var center = view.getCenterInternal();\n        var resolution = view.getResolution();\n        var ovresolution = ovview.getResolution();\n        var width = (mapSize[0] * resolution) / ovresolution;\n        var height = (mapSize[1] * resolution) / ovresolution;\n        // set position using center coordinates\n        overlay.setPosition(center);\n        // set box size calculated from map extent size and overview map resolution\n        if (box) {\n            box.style.width = width + 'px';\n            box.style.height = height + 'px';\n            var transform = 'rotate(' + rotation + 'rad)';\n            box.style.transform = transform;\n        }\n    };\n    /**\n     * @private\n     */\n    OverviewMap.prototype.updateBoxAfterOvmapIsRendered_ = function () {\n        if (this.ovmapPostrenderKey_) {\n            return;\n        }\n        this.ovmapPostrenderKey_ = listenOnce(this.ovmap_, MapEventType.POSTRENDER, function (event) {\n            delete this.ovmapPostrenderKey_;\n            this.updateBox_();\n        }, this);\n    };\n    /**\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    OverviewMap.prototype.handleClick_ = function (event) {\n        event.preventDefault();\n        this.handleToggle_();\n    };\n    /**\n     * @private\n     */\n    OverviewMap.prototype.handleToggle_ = function () {\n        this.element.classList.toggle(CLASS_COLLAPSED);\n        if (this.collapsed_) {\n            replaceNode(this.collapseLabel_, this.label_);\n        }\n        else {\n            replaceNode(this.label_, this.collapseLabel_);\n        }\n        this.collapsed_ = !this.collapsed_;\n        // manage overview map if it had not been rendered before and control\n        // is expanded\n        var ovmap = this.ovmap_;\n        if (!this.collapsed_) {\n            if (ovmap.isRendered()) {\n                this.viewExtent_ = undefined;\n                ovmap.render();\n                return;\n            }\n            ovmap.updateSize();\n            this.resetExtent_();\n            this.updateBoxAfterOvmapIsRendered_();\n        }\n    };\n    /**\n     * Return `true` if the overview map is collapsible, `false` otherwise.\n     * @return {boolean} True if the widget is collapsible.\n     * @api\n     */\n    OverviewMap.prototype.getCollapsible = function () {\n        return this.collapsible_;\n    };\n    /**\n     * Set whether the overview map should be collapsible.\n     * @param {boolean} collapsible True if the widget is collapsible.\n     * @api\n     */\n    OverviewMap.prototype.setCollapsible = function (collapsible) {\n        if (this.collapsible_ === collapsible) {\n            return;\n        }\n        this.collapsible_ = collapsible;\n        this.element.classList.toggle('ol-uncollapsible');\n        if (!collapsible && this.collapsed_) {\n            this.handleToggle_();\n        }\n    };\n    /**\n     * Collapse or expand the overview map according to the passed parameter. Will\n     * not do anything if the overview map isn't collapsible or if the current\n     * collapsed state is already the one requested.\n     * @param {boolean} collapsed True if the widget is collapsed.\n     * @api\n     */\n    OverviewMap.prototype.setCollapsed = function (collapsed) {\n        if (!this.collapsible_ || this.collapsed_ === collapsed) {\n            return;\n        }\n        this.handleToggle_();\n    };\n    /**\n     * Determine if the overview map is collapsed.\n     * @return {boolean} The overview map is collapsed.\n     * @api\n     */\n    OverviewMap.prototype.getCollapsed = function () {\n        return this.collapsed_;\n    };\n    /**\n     * Return `true` if the overview map view can rotate, `false` otherwise.\n     * @return {boolean} True if the control view can rotate.\n     * @api\n     */\n    OverviewMap.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Set whether the overview map view should rotate with the main map view.\n     * @param {boolean} rotateWithView True if the control view should rotate.\n     * @api\n     */\n    OverviewMap.prototype.setRotateWithView = function (rotateWithView) {\n        if (this.rotateWithView_ === rotateWithView) {\n            return;\n        }\n        this.rotateWithView_ = rotateWithView;\n        if (this.getMap().getView().getRotation() !== 0) {\n            if (this.rotateWithView_) {\n                this.handleRotationChanged_();\n            }\n            else {\n                this.ovmap_.getView().setRotation(0);\n            }\n            this.viewExtent_ = undefined;\n            this.validateExtent_();\n            this.updateBox_();\n        }\n    };\n    /**\n     * Return the overview map.\n     * @return {import(\"../PluggableMap.js\").default} Overview map.\n     * @api\n     */\n    OverviewMap.prototype.getOverviewMap = function () {\n        return this.ovmap_;\n    };\n    /**\n     * Update the overview map element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    OverviewMap.prototype.render = function (mapEvent) {\n        this.validateExtent_();\n        this.updateBox_();\n    };\n    return OverviewMap;\n}(Control));\nexport default OverviewMap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}