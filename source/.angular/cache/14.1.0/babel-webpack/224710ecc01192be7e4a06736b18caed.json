{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/interaction/Select\n */\n\n\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport Interaction from './Interaction.js';\nimport VectorLayer from '../layer/Vector.js';\nimport { TRUE } from '../functions.js';\nimport { clear } from '../obj.js';\nimport { createEditingStyle } from '../style/Style.js';\nimport { extend, includes } from '../array.js';\nimport { getUid } from '../util.js';\nimport { never, shiftKeyOnly, singleClick } from '../events/condition.js';\n/**\n * @enum {string}\n */\n\nvar SelectEventType = {\n  /**\n   * Triggered when feature(s) has been (de)selected.\n   * @event SelectEvent#select\n   * @api\n   */\n  SELECT: 'select'\n};\n/**\n * A function that takes an {@link module:ol/Feature~Feature} or\n * {@link module:ol/render/Feature~RenderFeature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>):boolean} FilterFunction\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [addCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is the event\n * for the selected features as a whole. By default, this is\n * {@link module:ol/events/condition.singleClick}. Clicking on a feature selects that\n * feature and removes any that were in the selection. Clicking outside any\n * feature removes all from the selection.\n * See `toggle`, `add`, `remove` options for adding/removing extra features to/\n * from the selection.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} [layers]\n * A list of layers from which features should be selected. Alternatively, a\n * filter function can be provided. The function will be called for each layer\n * in the map and should return `true` for layers that you want to be\n * selectable. If the option is absent, all visible layers will be considered\n * selectable.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style]\n * Style for the selected features. By default the default edit style is used\n * (see {@link module:ol/style/Style~Style}). Set to `null` if this interaction should not apply\n * any style changes for selected features.\n * If set to a falsey value, the selected feature's style will not change.\n * @property {import(\"../events/condition.js\").Condition} [removeCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [toggleCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is in addition\n * to the `condition` event. By default,\n * {@link module:ol/events/condition.shiftKeyOnly}, i.e. pressing `shift` as\n * well as the `condition` event, adds that feature to the current selection if\n * it is not currently selected, and removes it if it is. See `add` and `remove`\n * if you want to use different events instead of a toggle.\n * @property {boolean} [multi=false] A boolean that determines if the default\n * behaviour should select only single features or all (overlapping) features at\n * the clicked map position. The default of `false` means single select.\n * @property {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} [features]\n * Collection where the interaction will place selected features. Optional. If\n * not set the interaction will create a collection. In any case the collection\n * used by the interaction is returned by\n * {@link module:ol/interaction/Select~Select#getFeatures}.\n * @property {FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature~Feature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside\n * the radius around the given position will be checked for features.\n */\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Select~Select} instances are instances of\n * this type.\n */\n\nvar SelectEvent =\n/** @class */\nfunction (_super) {\n  __extends(SelectEvent, _super);\n  /**\n   * @param {SelectEventType} type The event type.\n   * @param {Array<import(\"../Feature.js\").default>} selected Selected features.\n   * @param {Array<import(\"../Feature.js\").default>} deselected Deselected features.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Associated\n   *     {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n   */\n\n\n  function SelectEvent(type, selected, deselected, mapBrowserEvent) {\n    var _this = _super.call(this, type) || this;\n    /**\n     * Selected features array.\n     * @type {Array<import(\"../Feature.js\").default>}\n     * @api\n     */\n\n\n    _this.selected = selected;\n    /**\n     * Deselected features array.\n     * @type {Array<import(\"../Feature.js\").default>}\n     * @api\n     */\n\n    _this.deselected = deselected;\n    /**\n     * Associated {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n\n    _this.mapBrowserEvent = mapBrowserEvent;\n    return _this;\n  }\n\n  return SelectEvent;\n}(Event);\n\nexport { SelectEvent };\n/**\n * Original feature styles to reset to when features are no longer selected.\n * @type {Object<number, import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction>}\n */\n\nvar originalFeatureStyles = {};\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'select', SelectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'select', Return>} SelectOnSignature\n */\n\n/**\n * @classdesc\n * Interaction for selecting vector features. By default, selected features are\n * styled differently, so this interaction can be used for visual highlighting,\n * as well as selecting features for other actions, such as modification or\n * output. There are three ways of controlling which features are selected:\n * using the browser event as defined by the `condition` and optionally the\n * `toggle`, `add`/`remove`, and `multi` options; a `layers` filter; and a\n * further feature filter using the `filter` option.\n *\n * @fires SelectEvent\n * @api\n */\n\nvar Select =\n/** @class */\nfunction (_super) {\n  __extends(Select, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function Select(opt_options) {\n    var _this = _super.call(this) || this;\n    /***\n     * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n     */\n\n\n    _this.on;\n    /***\n     * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {SelectOnSignature<void>}\n     */\n\n    _this.un;\n    var options = opt_options ? opt_options : {};\n    /**\n     * @private\n     */\n\n    _this.boundAddFeature_ = _this.addFeature_.bind(_this);\n    /**\n     * @private\n     */\n\n    _this.boundRemoveFeature_ = _this.removeFeature_.bind(_this);\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n\n    _this.condition_ = options.condition ? options.condition : singleClick;\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n\n    _this.addCondition_ = options.addCondition ? options.addCondition : never;\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n\n    _this.removeCondition_ = options.removeCondition ? options.removeCondition : never;\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n\n    _this.toggleCondition_ = options.toggleCondition ? options.toggleCondition : shiftKeyOnly;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.multi_ = options.multi ? options.multi : false;\n    /**\n     * @private\n     * @type {FilterFunction}\n     */\n\n    _this.filter_ = options.filter ? options.filter : TRUE;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n    /**\n     * @private\n     * @type {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null}\n     */\n\n    _this.style_ = options.style !== undefined ? options.style : getDefaultStyleFunction();\n    /**\n     * @private\n     * @type {import(\"../Collection.js\").default}\n     */\n\n    _this.features_ = options.features || new Collection();\n    /** @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} */\n\n    var layerFilter;\n\n    if (options.layers) {\n      if (typeof options.layers === 'function') {\n        layerFilter = options.layers;\n      } else {\n        var layers_1 = options.layers;\n\n        layerFilter = function (layer) {\n          return includes(layers_1, layer);\n        };\n      }\n    } else {\n      layerFilter = TRUE;\n    }\n    /**\n     * @private\n     * @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean}\n     */\n\n\n    _this.layerFilter_ = layerFilter;\n    /**\n     * An association between selected feature (key)\n     * and layer (value)\n     * @private\n     * @type {Object<string, import(\"../layer/Layer.js\").default>}\n     */\n\n    _this.featureLayerAssociation_ = {};\n    return _this;\n  }\n  /**\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   * @param {import(\"../layer/Layer.js\").default} layer Layer.\n   * @private\n   */\n\n\n  Select.prototype.addFeatureLayerAssociation_ = function (feature, layer) {\n    this.featureLayerAssociation_[getUid(feature)] = layer;\n  };\n  /**\n   * Get the selected features.\n   * @return {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} Features collection.\n   * @api\n   */\n\n\n  Select.prototype.getFeatures = function () {\n    return this.features_;\n  };\n  /**\n   * Returns the Hit-detection tolerance.\n   * @return {number} Hit tolerance in pixels.\n   * @api\n   */\n\n\n  Select.prototype.getHitTolerance = function () {\n    return this.hitTolerance_;\n  };\n  /**\n   * Returns the associated {@link module:ol/layer/Vector~VectorLayer vector layer} of\n   * a selected feature.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature\n   * @return {import('../layer/Vector.js').default} Layer.\n   * @api\n   */\n\n\n  Select.prototype.getLayer = function (feature) {\n    return (\n      /** @type {import('../layer/Vector.js').default} */\n      this.featureLayerAssociation_[getUid(feature)]\n    );\n  };\n  /**\n   * Hit-detection tolerance. Pixels inside the radius around the given position\n   * will be checked for features.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @api\n   */\n\n\n  Select.prototype.setHitTolerance = function (hitTolerance) {\n    this.hitTolerance_ = hitTolerance;\n  };\n  /**\n   * Remove the interaction from its current map, if any,  and attach it to a new\n   * map, if any. Pass `null` to just remove the interaction from the current map.\n   * @param {import(\"../PluggableMap.js\").default|null} map Map.\n   * @api\n   */\n\n\n  Select.prototype.setMap = function (map) {\n    var currentMap = this.getMap();\n\n    if (currentMap && this.style_) {\n      this.features_.forEach(this.restorePreviousStyle_.bind(this));\n    }\n\n    _super.prototype.setMap.call(this, map);\n\n    if (map) {\n      this.features_.addEventListener(CollectionEventType.ADD, this.boundAddFeature_);\n      this.features_.addEventListener(CollectionEventType.REMOVE, this.boundRemoveFeature_);\n\n      if (this.style_) {\n        this.features_.forEach(this.applySelectedStyle_.bind(this));\n      }\n    } else {\n      this.features_.removeEventListener(CollectionEventType.ADD, this.boundAddFeature_);\n      this.features_.removeEventListener(CollectionEventType.REMOVE, this.boundRemoveFeature_);\n    }\n  };\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n   * @private\n   */\n\n\n  Select.prototype.addFeature_ = function (evt) {\n    var feature = evt.element;\n\n    if (this.style_) {\n      this.applySelectedStyle_(feature);\n    }\n\n    if (!this.getLayer(feature)) {\n      var layer =\n      /** @type {VectorLayer} */\n      this.getMap().getAllLayers().find(function (layer) {\n        if (layer instanceof VectorLayer && layer.getSource() && layer.getSource().hasFeature(feature)) {\n          return layer;\n        }\n      });\n\n      if (layer) {\n        this.addFeatureLayerAssociation_(feature, layer);\n      }\n    }\n  };\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n   * @private\n   */\n\n\n  Select.prototype.removeFeature_ = function (evt) {\n    var feature = evt.element;\n\n    if (this.style_) {\n      this.restorePreviousStyle_(feature);\n    }\n  };\n  /**\n   * @return {import(\"../style/Style.js\").StyleLike|null} Select style.\n   */\n\n\n  Select.prototype.getStyle = function () {\n    return this.style_;\n  };\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @private\n   */\n\n\n  Select.prototype.applySelectedStyle_ = function (feature) {\n    var key = getUid(feature);\n\n    if (!(key in originalFeatureStyles)) {\n      originalFeatureStyles[key] = feature.getStyle();\n    }\n\n    feature.setStyle(this.style_);\n  };\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @private\n   */\n\n\n  Select.prototype.restorePreviousStyle_ = function (feature) {\n    var interactions = this.getMap().getInteractions().getArray();\n\n    for (var i = interactions.length - 1; i >= 0; --i) {\n      var interaction = interactions[i];\n\n      if (interaction !== this && interaction instanceof Select && interaction.getStyle() && interaction.getFeatures().getArray().lastIndexOf(feature) !== -1) {\n        feature.setStyle(interaction.getStyle());\n        return;\n      }\n    }\n\n    var key = getUid(feature);\n    feature.setStyle(originalFeatureStyles[key]);\n    delete originalFeatureStyles[key];\n  };\n  /**\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   * @private\n   */\n\n\n  Select.prototype.removeFeatureLayerAssociation_ = function (feature) {\n    delete this.featureLayerAssociation_[getUid(feature)];\n  };\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} and may change the\n   * selected state of features.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @this {Select}\n   */\n\n\n  Select.prototype.handleEvent = function (mapBrowserEvent) {\n    if (!this.condition_(mapBrowserEvent)) {\n      return true;\n    }\n\n    var add = this.addCondition_(mapBrowserEvent);\n    var remove = this.removeCondition_(mapBrowserEvent);\n    var toggle = this.toggleCondition_(mapBrowserEvent);\n    var set = !add && !remove && !toggle;\n    var map = mapBrowserEvent.map;\n    var features = this.getFeatures();\n    var deselected = [];\n    var selected = [];\n\n    if (set) {\n      // Replace the currently selected feature(s) with the feature(s) at the\n      // pixel, or clear the selected feature(s) if there is no feature at\n      // the pixel.\n      clear(this.featureLayerAssociation_);\n      map.forEachFeatureAtPixel(mapBrowserEvent.pixel,\n      /**\n       * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n       * @param {import(\"../layer/Layer.js\").default} layer Layer.\n       * @return {boolean|undefined} Continue to iterate over the features.\n       */\n      function (feature, layer) {\n        if (this.filter_(feature, layer)) {\n          this.addFeatureLayerAssociation_(feature, layer);\n          selected.push(feature);\n          return !this.multi_;\n        }\n      }.bind(this), {\n        layerFilter: this.layerFilter_,\n        hitTolerance: this.hitTolerance_\n      });\n\n      for (var i = features.getLength() - 1; i >= 0; --i) {\n        var feature = features.item(i);\n        var index = selected.indexOf(feature);\n\n        if (index > -1) {\n          // feature is already selected\n          selected.splice(index, 1);\n        } else {\n          features.remove(feature);\n          deselected.push(feature);\n        }\n      }\n\n      if (selected.length !== 0) {\n        features.extend(selected);\n      }\n    } else {\n      // Modify the currently selected feature(s).\n      map.forEachFeatureAtPixel(mapBrowserEvent.pixel,\n      /**\n       * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n       * @param {import(\"../layer/Layer.js\").default} layer Layer.\n       * @return {boolean|undefined} Continue to iterate over the features.\n       */\n      function (feature, layer) {\n        if (this.filter_(feature, layer)) {\n          if ((add || toggle) && !includes(features.getArray(), feature)) {\n            this.addFeatureLayerAssociation_(feature, layer);\n            selected.push(feature);\n          } else if ((remove || toggle) && includes(features.getArray(), feature)) {\n            deselected.push(feature);\n            this.removeFeatureLayerAssociation_(feature);\n          }\n\n          return !this.multi_;\n        }\n      }.bind(this), {\n        layerFilter: this.layerFilter_,\n        hitTolerance: this.hitTolerance_\n      });\n\n      for (var j = deselected.length - 1; j >= 0; --j) {\n        features.remove(deselected[j]);\n      }\n\n      features.extend(selected);\n    }\n\n    if (selected.length > 0 || deselected.length > 0) {\n      this.dispatchEvent(new SelectEvent(SelectEventType.SELECT, selected, deselected, mapBrowserEvent));\n    }\n\n    return true;\n  };\n\n  return Select;\n}(Interaction);\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\n\n\nfunction getDefaultStyleFunction() {\n  var styles = createEditingStyle();\n  extend(styles['Polygon'], styles['LineString']);\n  extend(styles['GeometryCollection'], styles['LineString']);\n  return function (feature) {\n    if (!feature.getGeometry()) {\n      return null;\n    }\n\n    return styles[feature.getGeometry().getType()];\n  };\n}\n\nexport default Select;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","Collection","CollectionEventType","Event","Interaction","VectorLayer","TRUE","clear","createEditingStyle","extend","includes","getUid","never","shiftKeyOnly","singleClick","SelectEventType","SELECT","SelectEvent","_super","type","selected","deselected","mapBrowserEvent","_this","originalFeatureStyles","Select","opt_options","on","once","un","options","boundAddFeature_","addFeature_","bind","boundRemoveFeature_","removeFeature_","condition_","condition","addCondition_","addCondition","removeCondition_","removeCondition","toggleCondition_","toggleCondition","multi_","multi","filter_","filter","hitTolerance_","hitTolerance","style_","style","undefined","getDefaultStyleFunction","features_","features","layerFilter","layers","layers_1","layer","layerFilter_","featureLayerAssociation_","addFeatureLayerAssociation_","feature","getFeatures","getHitTolerance","getLayer","setHitTolerance","setMap","map","currentMap","getMap","forEach","restorePreviousStyle_","addEventListener","ADD","REMOVE","applySelectedStyle_","removeEventListener","evt","element","getAllLayers","find","getSource","hasFeature","getStyle","key","setStyle","interactions","getInteractions","getArray","i","length","interaction","lastIndexOf","removeFeatureLayerAssociation_","handleEvent","add","remove","toggle","set","forEachFeatureAtPixel","pixel","push","getLength","item","index","indexOf","splice","j","dispatchEvent","styles","getGeometry","getType"],"sources":["/home/asura/github/smartcity/source/node_modules/ol/interaction/Select.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Select\n */\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport Interaction from './Interaction.js';\nimport VectorLayer from '../layer/Vector.js';\nimport { TRUE } from '../functions.js';\nimport { clear } from '../obj.js';\nimport { createEditingStyle } from '../style/Style.js';\nimport { extend, includes } from '../array.js';\nimport { getUid } from '../util.js';\nimport { never, shiftKeyOnly, singleClick } from '../events/condition.js';\n/**\n * @enum {string}\n */\nvar SelectEventType = {\n    /**\n     * Triggered when feature(s) has been (de)selected.\n     * @event SelectEvent#select\n     * @api\n     */\n    SELECT: 'select',\n};\n/**\n * A function that takes an {@link module:ol/Feature~Feature} or\n * {@link module:ol/render/Feature~RenderFeature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>):boolean} FilterFunction\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [addCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is the event\n * for the selected features as a whole. By default, this is\n * {@link module:ol/events/condition.singleClick}. Clicking on a feature selects that\n * feature and removes any that were in the selection. Clicking outside any\n * feature removes all from the selection.\n * See `toggle`, `add`, `remove` options for adding/removing extra features to/\n * from the selection.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} [layers]\n * A list of layers from which features should be selected. Alternatively, a\n * filter function can be provided. The function will be called for each layer\n * in the map and should return `true` for layers that you want to be\n * selectable. If the option is absent, all visible layers will be considered\n * selectable.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style]\n * Style for the selected features. By default the default edit style is used\n * (see {@link module:ol/style/Style~Style}). Set to `null` if this interaction should not apply\n * any style changes for selected features.\n * If set to a falsey value, the selected feature's style will not change.\n * @property {import(\"../events/condition.js\").Condition} [removeCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [toggleCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is in addition\n * to the `condition` event. By default,\n * {@link module:ol/events/condition.shiftKeyOnly}, i.e. pressing `shift` as\n * well as the `condition` event, adds that feature to the current selection if\n * it is not currently selected, and removes it if it is. See `add` and `remove`\n * if you want to use different events instead of a toggle.\n * @property {boolean} [multi=false] A boolean that determines if the default\n * behaviour should select only single features or all (overlapping) features at\n * the clicked map position. The default of `false` means single select.\n * @property {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} [features]\n * Collection where the interaction will place selected features. Optional. If\n * not set the interaction will create a collection. In any case the collection\n * used by the interaction is returned by\n * {@link module:ol/interaction/Select~Select#getFeatures}.\n * @property {FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature~Feature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside\n * the radius around the given position will be checked for features.\n */\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Select~Select} instances are instances of\n * this type.\n */\nvar SelectEvent = /** @class */ (function (_super) {\n    __extends(SelectEvent, _super);\n    /**\n     * @param {SelectEventType} type The event type.\n     * @param {Array<import(\"../Feature.js\").default>} selected Selected features.\n     * @param {Array<import(\"../Feature.js\").default>} deselected Deselected features.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Associated\n     *     {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     */\n    function SelectEvent(type, selected, deselected, mapBrowserEvent) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * Selected features array.\n         * @type {Array<import(\"../Feature.js\").default>}\n         * @api\n         */\n        _this.selected = selected;\n        /**\n         * Deselected features array.\n         * @type {Array<import(\"../Feature.js\").default>}\n         * @api\n         */\n        _this.deselected = deselected;\n        /**\n         * Associated {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n         * @type {import(\"../MapBrowserEvent.js\").default}\n         * @api\n         */\n        _this.mapBrowserEvent = mapBrowserEvent;\n        return _this;\n    }\n    return SelectEvent;\n}(Event));\nexport { SelectEvent };\n/**\n * Original feature styles to reset to when features are no longer selected.\n * @type {Object<number, import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction>}\n */\nvar originalFeatureStyles = {};\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'select', SelectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'select', Return>} SelectOnSignature\n */\n/**\n * @classdesc\n * Interaction for selecting vector features. By default, selected features are\n * styled differently, so this interaction can be used for visual highlighting,\n * as well as selecting features for other actions, such as modification or\n * output. There are three ways of controlling which features are selected:\n * using the browser event as defined by the `condition` and optionally the\n * `toggle`, `add`/`remove`, and `multi` options; a `layers` filter; and a\n * further feature filter using the `filter` option.\n *\n * @fires SelectEvent\n * @api\n */\nvar Select = /** @class */ (function (_super) {\n    __extends(Select, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Select(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {SelectOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         */\n        _this.boundAddFeature_ = _this.addFeature_.bind(_this);\n        /**\n         * @private\n         */\n        _this.boundRemoveFeature_ = _this.removeFeature_.bind(_this);\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : singleClick;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.addCondition_ = options.addCondition ? options.addCondition : never;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.removeCondition_ = options.removeCondition\n            ? options.removeCondition\n            : never;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.toggleCondition_ = options.toggleCondition\n            ? options.toggleCondition\n            : shiftKeyOnly;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.multi_ = options.multi ? options.multi : false;\n        /**\n         * @private\n         * @type {FilterFunction}\n         */\n        _this.filter_ = options.filter ? options.filter : TRUE;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n        /**\n         * @private\n         * @type {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null}\n         */\n        _this.style_ =\n            options.style !== undefined ? options.style : getDefaultStyleFunction();\n        /**\n         * @private\n         * @type {import(\"../Collection.js\").default}\n         */\n        _this.features_ = options.features || new Collection();\n        /** @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} */\n        var layerFilter;\n        if (options.layers) {\n            if (typeof options.layers === 'function') {\n                layerFilter = options.layers;\n            }\n            else {\n                var layers_1 = options.layers;\n                layerFilter = function (layer) {\n                    return includes(layers_1, layer);\n                };\n            }\n        }\n        else {\n            layerFilter = TRUE;\n        }\n        /**\n         * @private\n         * @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean}\n         */\n        _this.layerFilter_ = layerFilter;\n        /**\n         * An association between selected feature (key)\n         * and layer (value)\n         * @private\n         * @type {Object<string, import(\"../layer/Layer.js\").default>}\n         */\n        _this.featureLayerAssociation_ = {};\n        return _this;\n    }\n    /**\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../layer/Layer.js\").default} layer Layer.\n     * @private\n     */\n    Select.prototype.addFeatureLayerAssociation_ = function (feature, layer) {\n        this.featureLayerAssociation_[getUid(feature)] = layer;\n    };\n    /**\n     * Get the selected features.\n     * @return {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} Features collection.\n     * @api\n     */\n    Select.prototype.getFeatures = function () {\n        return this.features_;\n    };\n    /**\n     * Returns the Hit-detection tolerance.\n     * @return {number} Hit tolerance in pixels.\n     * @api\n     */\n    Select.prototype.getHitTolerance = function () {\n        return this.hitTolerance_;\n    };\n    /**\n     * Returns the associated {@link module:ol/layer/Vector~VectorLayer vector layer} of\n     * a selected feature.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature\n     * @return {import('../layer/Vector.js').default} Layer.\n     * @api\n     */\n    Select.prototype.getLayer = function (feature) {\n        return /** @type {import('../layer/Vector.js').default} */ (this.featureLayerAssociation_[getUid(feature)]);\n    };\n    /**\n     * Hit-detection tolerance. Pixels inside the radius around the given position\n     * will be checked for features.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @api\n     */\n    Select.prototype.setHitTolerance = function (hitTolerance) {\n        this.hitTolerance_ = hitTolerance;\n    };\n    /**\n     * Remove the interaction from its current map, if any,  and attach it to a new\n     * map, if any. Pass `null` to just remove the interaction from the current map.\n     * @param {import(\"../PluggableMap.js\").default|null} map Map.\n     * @api\n     */\n    Select.prototype.setMap = function (map) {\n        var currentMap = this.getMap();\n        if (currentMap && this.style_) {\n            this.features_.forEach(this.restorePreviousStyle_.bind(this));\n        }\n        _super.prototype.setMap.call(this, map);\n        if (map) {\n            this.features_.addEventListener(CollectionEventType.ADD, this.boundAddFeature_);\n            this.features_.addEventListener(CollectionEventType.REMOVE, this.boundRemoveFeature_);\n            if (this.style_) {\n                this.features_.forEach(this.applySelectedStyle_.bind(this));\n            }\n        }\n        else {\n            this.features_.removeEventListener(CollectionEventType.ADD, this.boundAddFeature_);\n            this.features_.removeEventListener(CollectionEventType.REMOVE, this.boundRemoveFeature_);\n        }\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n     * @private\n     */\n    Select.prototype.addFeature_ = function (evt) {\n        var feature = evt.element;\n        if (this.style_) {\n            this.applySelectedStyle_(feature);\n        }\n        if (!this.getLayer(feature)) {\n            var layer = /** @type {VectorLayer} */ (this.getMap()\n                .getAllLayers()\n                .find(function (layer) {\n                if (layer instanceof VectorLayer &&\n                    layer.getSource() &&\n                    layer.getSource().hasFeature(feature)) {\n                    return layer;\n                }\n            }));\n            if (layer) {\n                this.addFeatureLayerAssociation_(feature, layer);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n     * @private\n     */\n    Select.prototype.removeFeature_ = function (evt) {\n        var feature = evt.element;\n        if (this.style_) {\n            this.restorePreviousStyle_(feature);\n        }\n    };\n    /**\n     * @return {import(\"../style/Style.js\").StyleLike|null} Select style.\n     */\n    Select.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @private\n     */\n    Select.prototype.applySelectedStyle_ = function (feature) {\n        var key = getUid(feature);\n        if (!(key in originalFeatureStyles)) {\n            originalFeatureStyles[key] = feature.getStyle();\n        }\n        feature.setStyle(this.style_);\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @private\n     */\n    Select.prototype.restorePreviousStyle_ = function (feature) {\n        var interactions = this.getMap().getInteractions().getArray();\n        for (var i = interactions.length - 1; i >= 0; --i) {\n            var interaction = interactions[i];\n            if (interaction !== this &&\n                interaction instanceof Select &&\n                interaction.getStyle() &&\n                interaction.getFeatures().getArray().lastIndexOf(feature) !== -1) {\n                feature.setStyle(interaction.getStyle());\n                return;\n            }\n        }\n        var key = getUid(feature);\n        feature.setStyle(originalFeatureStyles[key]);\n        delete originalFeatureStyles[key];\n    };\n    /**\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @private\n     */\n    Select.prototype.removeFeatureLayerAssociation_ = function (feature) {\n        delete this.featureLayerAssociation_[getUid(feature)];\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} and may change the\n     * selected state of features.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {Select}\n     */\n    Select.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!this.condition_(mapBrowserEvent)) {\n            return true;\n        }\n        var add = this.addCondition_(mapBrowserEvent);\n        var remove = this.removeCondition_(mapBrowserEvent);\n        var toggle = this.toggleCondition_(mapBrowserEvent);\n        var set = !add && !remove && !toggle;\n        var map = mapBrowserEvent.map;\n        var features = this.getFeatures();\n        var deselected = [];\n        var selected = [];\n        if (set) {\n            // Replace the currently selected feature(s) with the feature(s) at the\n            // pixel, or clear the selected feature(s) if there is no feature at\n            // the pixel.\n            clear(this.featureLayerAssociation_);\n            map.forEachFeatureAtPixel(mapBrowserEvent.pixel, \n            /**\n             * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n             * @param {import(\"../layer/Layer.js\").default} layer Layer.\n             * @return {boolean|undefined} Continue to iterate over the features.\n             */\n            function (feature, layer) {\n                if (this.filter_(feature, layer)) {\n                    this.addFeatureLayerAssociation_(feature, layer);\n                    selected.push(feature);\n                    return !this.multi_;\n                }\n            }.bind(this), {\n                layerFilter: this.layerFilter_,\n                hitTolerance: this.hitTolerance_,\n            });\n            for (var i = features.getLength() - 1; i >= 0; --i) {\n                var feature = features.item(i);\n                var index = selected.indexOf(feature);\n                if (index > -1) {\n                    // feature is already selected\n                    selected.splice(index, 1);\n                }\n                else {\n                    features.remove(feature);\n                    deselected.push(feature);\n                }\n            }\n            if (selected.length !== 0) {\n                features.extend(selected);\n            }\n        }\n        else {\n            // Modify the currently selected feature(s).\n            map.forEachFeatureAtPixel(mapBrowserEvent.pixel, \n            /**\n             * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n             * @param {import(\"../layer/Layer.js\").default} layer Layer.\n             * @return {boolean|undefined} Continue to iterate over the features.\n             */\n            function (feature, layer) {\n                if (this.filter_(feature, layer)) {\n                    if ((add || toggle) && !includes(features.getArray(), feature)) {\n                        this.addFeatureLayerAssociation_(feature, layer);\n                        selected.push(feature);\n                    }\n                    else if ((remove || toggle) &&\n                        includes(features.getArray(), feature)) {\n                        deselected.push(feature);\n                        this.removeFeatureLayerAssociation_(feature);\n                    }\n                    return !this.multi_;\n                }\n            }.bind(this), {\n                layerFilter: this.layerFilter_,\n                hitTolerance: this.hitTolerance_,\n            });\n            for (var j = deselected.length - 1; j >= 0; --j) {\n                features.remove(deselected[j]);\n            }\n            features.extend(selected);\n        }\n        if (selected.length > 0 || deselected.length > 0) {\n            this.dispatchEvent(new SelectEvent(SelectEventType.SELECT, selected, deselected, mapBrowserEvent));\n        }\n        return true;\n    };\n    return Select;\n}(Interaction));\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n    var styles = createEditingStyle();\n    extend(styles['Polygon'], styles['LineString']);\n    extend(styles['GeometryCollection'], styles['LineString']);\n    return function (feature) {\n        if (!feature.getGeometry()) {\n            return null;\n        }\n        return styles[feature.getGeometry().getType()];\n    };\n}\nexport default Select;\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;EACrD,IAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;MAAEC,SAAS,EAAE;IAAb,aAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;MAAED,CAAC,CAACI,SAAF,GAAcH,CAAd;IAAkB,CAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;MAAE,KAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIC,MAAM,CAACK,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EAAgDN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;IAAc,CAFrG;;IAGA,OAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;EACH,CALD;;EAMA,OAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;IACnB,IAAI,OAAOA,CAAP,KAAa,UAAb,IAA2BA,CAAC,KAAK,IAArC,EACI,MAAM,IAAIS,SAAJ,CAAc,yBAAyBC,MAAM,CAACV,CAAD,CAA/B,GAAqC,+BAAnD,CAAN;IACJF,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;IACA,SAASW,EAAT,GAAc;MAAE,KAAKC,WAAL,GAAmBb,CAAnB;IAAuB;;IACvCA,CAAC,CAACO,SAAF,GAAcN,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACY,MAAP,CAAcb,CAAd,CAAb,IAAiCW,EAAE,CAACL,SAAH,GAAeN,CAAC,CAACM,SAAjB,EAA4B,IAAIK,EAAJ,EAA7D,CAAd;EACH,CAND;AAOH,CAd2C,EAA5C;AAeA;AACA;AACA;;;AACA,OAAOG,UAAP,MAAuB,kBAAvB;AACA,OAAOC,mBAAP,MAAgC,2BAAhC;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,KAAT,QAAsB,WAAtB;AACA,SAASC,kBAAT,QAAmC,mBAAnC;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,aAAjC;AACA,SAASC,MAAT,QAAuB,YAAvB;AACA,SAASC,KAAT,EAAgBC,YAAhB,EAA8BC,WAA9B,QAAiD,wBAAjD;AACA;AACA;AACA;;AACA,IAAIC,eAAe,GAAG;EAClB;AACJ;AACA;AACA;AACA;EACIC,MAAM,EAAE;AANU,CAAtB;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,WAAW;AAAG;AAAe,UAAUC,MAAV,EAAkB;EAC/ClC,SAAS,CAACiC,WAAD,EAAcC,MAAd,CAAT;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;;;EACI,SAASD,WAAT,CAAqBE,IAArB,EAA2BC,QAA3B,EAAqCC,UAArC,EAAiDC,eAAjD,EAAkE;IAC9D,IAAIC,KAAK,GAAGL,MAAM,CAACvB,IAAP,CAAY,IAAZ,EAAkBwB,IAAlB,KAA2B,IAAvC;IACA;AACR;AACA;AACA;AACA;;;IACQI,KAAK,CAACH,QAAN,GAAiBA,QAAjB;IACA;AACR;AACA;AACA;AACA;;IACQG,KAAK,CAACF,UAAN,GAAmBA,UAAnB;IACA;AACR;AACA;AACA;AACA;;IACQE,KAAK,CAACD,eAAN,GAAwBA,eAAxB;IACA,OAAOC,KAAP;EACH;;EACD,OAAON,WAAP;AACH,CAhCgC,CAgC/Bd,KAhC+B,CAAjC;;AAiCA,SAASc,WAAT;AACA;AACA;AACA;AACA;;AACA,IAAIO,qBAAqB,GAAG,EAA5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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"},"metadata":{},"sourceType":"module"}