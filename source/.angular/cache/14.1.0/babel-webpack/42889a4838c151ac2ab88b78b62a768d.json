{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/interaction/Translate\n */\n\n\nimport Collection from '../Collection.js';\nimport Event from '../events/Event.js';\nimport InteractionProperty from './Property.js';\nimport PointerInteraction from './Pointer.js';\nimport { TRUE } from '../functions.js';\nimport { always } from '../events/condition.js';\nimport { includes } from '../array.js';\n/**\n * @enum {string}\n */\n\nvar TranslateEventType = {\n  /**\n   * Triggered upon feature translation start.\n   * @event TranslateEvent#translatestart\n   * @api\n   */\n  TRANSLATESTART: 'translatestart',\n\n  /**\n   * Triggered upon feature translation.\n   * @event TranslateEvent#translating\n   * @api\n   */\n  TRANSLATING: 'translating',\n\n  /**\n   * Triggered upon feature translation end.\n   * @event TranslateEvent#translateend\n   * @api\n   */\n  TRANSLATEEND: 'translateend'\n};\n/**\n * A function that takes an {@link module:ol/Feature~Feature} or\n * {@link module:ol/render/Feature~RenderFeature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * translated or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>):boolean} FilterFunction\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.always}.\n * @property {Collection<import(\"../Feature.js\").default>} [features] Features contained in this collection will be able to be translated together.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} [layers] A list of layers from which features should be\n * translated. Alternatively, a filter function can be provided. The\n * function will be called for each layer in the map and should return\n * `true` for layers that you want to be translatable. If the option is\n * absent, all visible layers will be considered translatable.\n * Not used if `features` is provided.\n * @property {FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature~Feature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * translated or `false` otherwise. Not used if `features` is provided.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside the radius around the given position\n * will be checked for features.\n */\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Translate~Translate} instances\n * are instances of this type.\n */\n\nvar TranslateEvent =\n/** @class */\nfunction (_super) {\n  __extends(TranslateEvent, _super);\n  /**\n   * @param {TranslateEventType} type Type.\n   * @param {Collection<import(\"../Feature.js\").default>} features The features translated.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} startCoordinate The original coordinates before.translation started\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   */\n\n\n  function TranslateEvent(type, features, coordinate, startCoordinate, mapBrowserEvent) {\n    var _this = _super.call(this, type) || this;\n    /**\n     * The features being translated.\n     * @type {Collection<import(\"../Feature.js\").default>}\n     * @api\n     */\n\n\n    _this.features = features;\n    /**\n     * The coordinate of the drag event.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n\n    _this.coordinate = coordinate;\n    /**\n     * The coordinate of the start position before translation started.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n\n    _this.startCoordinate = startCoordinate;\n    /**\n     * Associated {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n\n    _this.mapBrowserEvent = mapBrowserEvent;\n    return _this;\n  }\n\n  return TranslateEvent;\n}(Event);\n\nexport { TranslateEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'translateend'|'translatestart'|'translating', TranslateEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'translateend'|'translatestart'|'translating', Return>} TranslateOnSignature\n */\n\n/**\n * @classdesc\n * Interaction for translating (moving) features.\n * If you want to translate multiple features in a single action (for example,\n * the collection used by a select interaction), construct the interaction with\n * the `features` option.\n *\n * @fires TranslateEvent\n * @api\n */\n\nvar Translate =\n/** @class */\nfunction (_super) {\n  __extends(Translate, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function Translate(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    _this = _super.call(this,\n    /** @type {import(\"./Pointer.js\").Options} */\n    options) || this;\n    /***\n     * @type {TranslateOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.on;\n    /***\n     * @type {TranslateOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {TranslateOnSignature<void>}\n     */\n\n    _this.un;\n    /**\n     * The last position we translated to.\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @private\n     */\n\n    _this.lastCoordinate_ = null;\n    /**\n     * The start position before translation started.\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @private\n     */\n\n    _this.startCoordinate_ = null;\n    /**\n     * @type {Collection<import(\"../Feature.js\").default>|null}\n     * @private\n     */\n\n    _this.features_ = options.features !== undefined ? options.features : null;\n    /** @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} */\n\n    var layerFilter;\n\n    if (options.layers && !_this.features_) {\n      if (typeof options.layers === 'function') {\n        layerFilter = options.layers;\n      } else {\n        var layers_1 = options.layers;\n\n        layerFilter = function (layer) {\n          return includes(layers_1, layer);\n        };\n      }\n    } else {\n      layerFilter = TRUE;\n    }\n    /**\n     * @private\n     * @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean}\n     */\n\n\n    _this.layerFilter_ = layerFilter;\n    /**\n     * @private\n     * @type {FilterFunction}\n     */\n\n    _this.filter_ = options.filter && !_this.features_ ? options.filter : TRUE;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n\n    _this.condition_ = options.condition ? options.condition : always;\n    /**\n     * @type {import(\"../Feature.js\").default}\n     * @private\n     */\n\n    _this.lastFeature_ = null;\n\n    _this.addChangeListener(InteractionProperty.ACTIVE, _this.handleActiveChanged_);\n\n    return _this;\n  }\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @return {boolean} If the event was consumed.\n   */\n\n\n  Translate.prototype.handleDownEvent = function (event) {\n    if (!event.originalEvent || !this.condition_(event)) {\n      return false;\n    }\n\n    this.lastFeature_ = this.featuresAtPixel_(event.pixel, event.map);\n\n    if (!this.lastCoordinate_ && this.lastFeature_) {\n      this.startCoordinate_ = event.coordinate;\n      this.lastCoordinate_ = event.coordinate;\n      this.handleMoveEvent(event);\n      var features = this.features_ || new Collection([this.lastFeature_]);\n      this.dispatchEvent(new TranslateEvent(TranslateEventType.TRANSLATESTART, features, event.coordinate, this.startCoordinate_, event));\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @return {boolean} If the event was consumed.\n   */\n\n\n  Translate.prototype.handleUpEvent = function (event) {\n    if (this.lastCoordinate_) {\n      this.lastCoordinate_ = null;\n      this.handleMoveEvent(event);\n      var features = this.features_ || new Collection([this.lastFeature_]);\n      this.dispatchEvent(new TranslateEvent(TranslateEventType.TRANSLATEEND, features, event.coordinate, this.startCoordinate_, event)); // cleanup\n\n      this.startCoordinate_ = null;\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   */\n\n\n  Translate.prototype.handleDragEvent = function (event) {\n    if (this.lastCoordinate_) {\n      var newCoordinate = event.coordinate;\n      var deltaX_1 = newCoordinate[0] - this.lastCoordinate_[0];\n      var deltaY_1 = newCoordinate[1] - this.lastCoordinate_[1];\n      var features = this.features_ || new Collection([this.lastFeature_]);\n      features.forEach(function (feature) {\n        var geom = feature.getGeometry();\n        geom.translate(deltaX_1, deltaY_1);\n        feature.setGeometry(geom);\n      });\n      this.lastCoordinate_ = newCoordinate;\n      this.dispatchEvent(new TranslateEvent(TranslateEventType.TRANSLATING, features, newCoordinate, this.startCoordinate_, event));\n    }\n  };\n  /**\n   * Handle pointer move events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   */\n\n\n  Translate.prototype.handleMoveEvent = function (event) {\n    var elem = event.map.getViewport(); // Change the cursor to grab/grabbing if hovering any of the features managed\n    // by the interaction\n\n    if (this.featuresAtPixel_(event.pixel, event.map)) {\n      elem.classList.remove(this.lastCoordinate_ ? 'ol-grab' : 'ol-grabbing');\n      elem.classList.add(this.lastCoordinate_ ? 'ol-grabbing' : 'ol-grab');\n    } else {\n      elem.classList.remove('ol-grab', 'ol-grabbing');\n    }\n  };\n  /**\n   * Tests to see if the given coordinates intersects any of our selected\n   * features.\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel coordinate to test for intersection.\n   * @param {import(\"../PluggableMap.js\").default} map Map to test the intersection on.\n   * @return {import(\"../Feature.js\").default} Returns the feature found at the specified pixel\n   * coordinates.\n   * @private\n   */\n\n\n  Translate.prototype.featuresAtPixel_ = function (pixel, map) {\n    return map.forEachFeatureAtPixel(pixel, function (feature, layer) {\n      if (this.filter_(feature, layer)) {\n        if (!this.features_ || includes(this.features_.getArray(), feature)) {\n          return feature;\n        }\n      }\n    }.bind(this), {\n      layerFilter: this.layerFilter_,\n      hitTolerance: this.hitTolerance_\n    });\n  };\n  /**\n   * Returns the Hit-detection tolerance.\n   * @return {number} Hit tolerance in pixels.\n   * @api\n   */\n\n\n  Translate.prototype.getHitTolerance = function () {\n    return this.hitTolerance_;\n  };\n  /**\n   * Hit-detection tolerance. Pixels inside the radius around the given position\n   * will be checked for features.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @api\n   */\n\n\n  Translate.prototype.setHitTolerance = function (hitTolerance) {\n    this.hitTolerance_ = hitTolerance;\n  };\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n\n\n  Translate.prototype.setMap = function (map) {\n    var oldMap = this.getMap();\n\n    _super.prototype.setMap.call(this, map);\n\n    this.updateState_(oldMap);\n  };\n  /**\n   * @private\n   */\n\n\n  Translate.prototype.handleActiveChanged_ = function () {\n    this.updateState_(null);\n  };\n  /**\n   * @param {import(\"../PluggableMap.js\").default} oldMap Old map.\n   * @private\n   */\n\n\n  Translate.prototype.updateState_ = function (oldMap) {\n    var map = this.getMap();\n    var active = this.getActive();\n\n    if (!map || !active) {\n      map = map || oldMap;\n\n      if (map) {\n        var elem = map.getViewport();\n        elem.classList.remove('ol-grab', 'ol-grabbing');\n      }\n    }\n  };\n\n  return Translate;\n}(PointerInteraction);\n\nexport default Translate;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","Collection","Event","InteractionProperty","PointerInteraction","TRUE","always","includes","TranslateEventType","TRANSLATESTART","TRANSLATING","TRANSLATEEND","TranslateEvent","_super","type","features","coordinate","startCoordinate","mapBrowserEvent","_this","Translate","opt_options","options","on","once","un","lastCoordinate_","startCoordinate_","features_","undefined","layerFilter","layers","layers_1","layer","layerFilter_","filter_","filter","hitTolerance_","hitTolerance","condition_","condition","lastFeature_","addChangeListener","ACTIVE","handleActiveChanged_","handleDownEvent","event","originalEvent","featuresAtPixel_","pixel","map","handleMoveEvent","dispatchEvent","handleUpEvent","handleDragEvent","newCoordinate","deltaX_1","deltaY_1","forEach","feature","geom","getGeometry","translate","setGeometry","elem","getViewport","classList","remove","add","forEachFeatureAtPixel","getArray","bind","getHitTolerance","setHitTolerance","setMap","oldMap","getMap","updateState_","active","getActive"],"sources":["/home/asura/github/smartcity/source/node_modules/ol/interaction/Translate.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Translate\n */\nimport Collection from '../Collection.js';\nimport Event from '../events/Event.js';\nimport InteractionProperty from './Property.js';\nimport PointerInteraction from './Pointer.js';\nimport { TRUE } from '../functions.js';\nimport { always } from '../events/condition.js';\nimport { includes } from '../array.js';\n/**\n * @enum {string}\n */\nvar TranslateEventType = {\n    /**\n     * Triggered upon feature translation start.\n     * @event TranslateEvent#translatestart\n     * @api\n     */\n    TRANSLATESTART: 'translatestart',\n    /**\n     * Triggered upon feature translation.\n     * @event TranslateEvent#translating\n     * @api\n     */\n    TRANSLATING: 'translating',\n    /**\n     * Triggered upon feature translation end.\n     * @event TranslateEvent#translateend\n     * @api\n     */\n    TRANSLATEEND: 'translateend',\n};\n/**\n * A function that takes an {@link module:ol/Feature~Feature} or\n * {@link module:ol/render/Feature~RenderFeature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * translated or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>):boolean} FilterFunction\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.always}.\n * @property {Collection<import(\"../Feature.js\").default>} [features] Features contained in this collection will be able to be translated together.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} [layers] A list of layers from which features should be\n * translated. Alternatively, a filter function can be provided. The\n * function will be called for each layer in the map and should return\n * `true` for layers that you want to be translatable. If the option is\n * absent, all visible layers will be considered translatable.\n * Not used if `features` is provided.\n * @property {FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature~Feature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * translated or `false` otherwise. Not used if `features` is provided.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside the radius around the given position\n * will be checked for features.\n */\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Translate~Translate} instances\n * are instances of this type.\n */\nvar TranslateEvent = /** @class */ (function (_super) {\n    __extends(TranslateEvent, _super);\n    /**\n     * @param {TranslateEventType} type Type.\n     * @param {Collection<import(\"../Feature.js\").default>} features The features translated.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} startCoordinate The original coordinates before.translation started\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     */\n    function TranslateEvent(type, features, coordinate, startCoordinate, mapBrowserEvent) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The features being translated.\n         * @type {Collection<import(\"../Feature.js\").default>}\n         * @api\n         */\n        _this.features = features;\n        /**\n         * The coordinate of the drag event.\n         * @const\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @api\n         */\n        _this.coordinate = coordinate;\n        /**\n         * The coordinate of the start position before translation started.\n         * @const\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @api\n         */\n        _this.startCoordinate = startCoordinate;\n        /**\n         * Associated {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n         * @type {import(\"../MapBrowserEvent.js\").default}\n         * @api\n         */\n        _this.mapBrowserEvent = mapBrowserEvent;\n        return _this;\n    }\n    return TranslateEvent;\n}(Event));\nexport { TranslateEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'translateend'|'translatestart'|'translating', TranslateEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'translateend'|'translatestart'|'translating', Return>} TranslateOnSignature\n */\n/**\n * @classdesc\n * Interaction for translating (moving) features.\n * If you want to translate multiple features in a single action (for example,\n * the collection used by a select interaction), construct the interaction with\n * the `features` option.\n *\n * @fires TranslateEvent\n * @api\n */\nvar Translate = /** @class */ (function (_super) {\n    __extends(Translate, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Translate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, /** @type {import(\"./Pointer.js\").Options} */ (options)) || this;\n        /***\n         * @type {TranslateOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {TranslateOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {TranslateOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * The last position we translated to.\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @private\n         */\n        _this.lastCoordinate_ = null;\n        /**\n         * The start position before translation started.\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @private\n         */\n        _this.startCoordinate_ = null;\n        /**\n         * @type {Collection<import(\"../Feature.js\").default>|null}\n         * @private\n         */\n        _this.features_ = options.features !== undefined ? options.features : null;\n        /** @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} */\n        var layerFilter;\n        if (options.layers && !_this.features_) {\n            if (typeof options.layers === 'function') {\n                layerFilter = options.layers;\n            }\n            else {\n                var layers_1 = options.layers;\n                layerFilter = function (layer) {\n                    return includes(layers_1, layer);\n                };\n            }\n        }\n        else {\n            layerFilter = TRUE;\n        }\n        /**\n         * @private\n         * @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean}\n         */\n        _this.layerFilter_ = layerFilter;\n        /**\n         * @private\n         * @type {FilterFunction}\n         */\n        _this.filter_ = options.filter && !_this.features_ ? options.filter : TRUE;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : always;\n        /**\n         * @type {import(\"../Feature.js\").default}\n         * @private\n         */\n        _this.lastFeature_ = null;\n        _this.addChangeListener(InteractionProperty.ACTIVE, _this.handleActiveChanged_);\n        return _this;\n    }\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @return {boolean} If the event was consumed.\n     */\n    Translate.prototype.handleDownEvent = function (event) {\n        if (!event.originalEvent || !this.condition_(event)) {\n            return false;\n        }\n        this.lastFeature_ = this.featuresAtPixel_(event.pixel, event.map);\n        if (!this.lastCoordinate_ && this.lastFeature_) {\n            this.startCoordinate_ = event.coordinate;\n            this.lastCoordinate_ = event.coordinate;\n            this.handleMoveEvent(event);\n            var features = this.features_ || new Collection([this.lastFeature_]);\n            this.dispatchEvent(new TranslateEvent(TranslateEventType.TRANSLATESTART, features, event.coordinate, this.startCoordinate_, event));\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @return {boolean} If the event was consumed.\n     */\n    Translate.prototype.handleUpEvent = function (event) {\n        if (this.lastCoordinate_) {\n            this.lastCoordinate_ = null;\n            this.handleMoveEvent(event);\n            var features = this.features_ || new Collection([this.lastFeature_]);\n            this.dispatchEvent(new TranslateEvent(TranslateEventType.TRANSLATEEND, features, event.coordinate, this.startCoordinate_, event));\n            // cleanup\n            this.startCoordinate_ = null;\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     */\n    Translate.prototype.handleDragEvent = function (event) {\n        if (this.lastCoordinate_) {\n            var newCoordinate = event.coordinate;\n            var deltaX_1 = newCoordinate[0] - this.lastCoordinate_[0];\n            var deltaY_1 = newCoordinate[1] - this.lastCoordinate_[1];\n            var features = this.features_ || new Collection([this.lastFeature_]);\n            features.forEach(function (feature) {\n                var geom = feature.getGeometry();\n                geom.translate(deltaX_1, deltaY_1);\n                feature.setGeometry(geom);\n            });\n            this.lastCoordinate_ = newCoordinate;\n            this.dispatchEvent(new TranslateEvent(TranslateEventType.TRANSLATING, features, newCoordinate, this.startCoordinate_, event));\n        }\n    };\n    /**\n     * Handle pointer move events.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     */\n    Translate.prototype.handleMoveEvent = function (event) {\n        var elem = event.map.getViewport();\n        // Change the cursor to grab/grabbing if hovering any of the features managed\n        // by the interaction\n        if (this.featuresAtPixel_(event.pixel, event.map)) {\n            elem.classList.remove(this.lastCoordinate_ ? 'ol-grab' : 'ol-grabbing');\n            elem.classList.add(this.lastCoordinate_ ? 'ol-grabbing' : 'ol-grab');\n        }\n        else {\n            elem.classList.remove('ol-grab', 'ol-grabbing');\n        }\n    };\n    /**\n     * Tests to see if the given coordinates intersects any of our selected\n     * features.\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel coordinate to test for intersection.\n     * @param {import(\"../PluggableMap.js\").default} map Map to test the intersection on.\n     * @return {import(\"../Feature.js\").default} Returns the feature found at the specified pixel\n     * coordinates.\n     * @private\n     */\n    Translate.prototype.featuresAtPixel_ = function (pixel, map) {\n        return map.forEachFeatureAtPixel(pixel, function (feature, layer) {\n            if (this.filter_(feature, layer)) {\n                if (!this.features_ || includes(this.features_.getArray(), feature)) {\n                    return feature;\n                }\n            }\n        }.bind(this), {\n            layerFilter: this.layerFilter_,\n            hitTolerance: this.hitTolerance_,\n        });\n    };\n    /**\n     * Returns the Hit-detection tolerance.\n     * @return {number} Hit tolerance in pixels.\n     * @api\n     */\n    Translate.prototype.getHitTolerance = function () {\n        return this.hitTolerance_;\n    };\n    /**\n     * Hit-detection tolerance. Pixels inside the radius around the given position\n     * will be checked for features.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @api\n     */\n    Translate.prototype.setHitTolerance = function (hitTolerance) {\n        this.hitTolerance_ = hitTolerance;\n    };\n    /**\n     * Remove the interaction from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    Translate.prototype.setMap = function (map) {\n        var oldMap = this.getMap();\n        _super.prototype.setMap.call(this, map);\n        this.updateState_(oldMap);\n    };\n    /**\n     * @private\n     */\n    Translate.prototype.handleActiveChanged_ = function () {\n        this.updateState_(null);\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").default} oldMap Old map.\n     * @private\n     */\n    Translate.prototype.updateState_ = function (oldMap) {\n        var map = this.getMap();\n        var active = this.getActive();\n        if (!map || !active) {\n            map = map || oldMap;\n            if (map) {\n                var elem = map.getViewport();\n                elem.classList.remove('ol-grab', 'ol-grabbing');\n            }\n        }\n    };\n    return Translate;\n}(PointerInteraction));\nexport default Translate;\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;EACrD,IAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;MAAEC,SAAS,EAAE;IAAb,aAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;MAAED,CAAC,CAACI,SAAF,GAAcH,CAAd;IAAkB,CAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;MAAE,KAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIC,MAAM,CAACK,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EAAgDN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;IAAc,CAFrG;;IAGA,OAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;EACH,CALD;;EAMA,OAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;IACnB,IAAI,OAAOA,CAAP,KAAa,UAAb,IAA2BA,CAAC,KAAK,IAArC,EACI,MAAM,IAAIS,SAAJ,CAAc,yBAAyBC,MAAM,CAACV,CAAD,CAA/B,GAAqC,+BAAnD,CAAN;IACJF,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;IACA,SAASW,EAAT,GAAc;MAAE,KAAKC,WAAL,GAAmBb,CAAnB;IAAuB;;IACvCA,CAAC,CAACO,SAAF,GAAcN,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACY,MAAP,CAAcb,CAAd,CAAb,IAAiCW,EAAE,CAACL,SAAH,GAAeN,CAAC,CAACM,SAAjB,EAA4B,IAAIK,EAAJ,EAA7D,CAAd;EACH,CAND;AAOH,CAd2C,EAA5C;AAeA;AACA;AACA;;;AACA,OAAOG,UAAP,MAAuB,kBAAvB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,mBAAP,MAAgC,eAAhC;AACA,OAAOC,kBAAP,MAA+B,cAA/B;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,MAAT,QAAuB,wBAAvB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA;AACA;AACA;;AACA,IAAIC,kBAAkB,GAAG;EACrB;AACJ;AACA;AACA;AACA;EACIC,cAAc,EAAE,gBANK;;EAOrB;AACJ;AACA;AACA;AACA;EACIC,WAAW,EAAE,aAZQ;;EAarB;AACJ;AACA;AACA;AACA;EACIC,YAAY,EAAE;AAlBO,CAAzB;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,cAAc;AAAG;AAAe,UAAUC,MAAV,EAAkB;EAClD7B,SAAS,CAAC4B,cAAD,EAAiBC,MAAjB,CAAT;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;;;EACI,SAASD,cAAT,CAAwBE,IAAxB,EAA8BC,QAA9B,EAAwCC,UAAxC,EAAoDC,eAApD,EAAqEC,eAArE,EAAsF;IAClF,IAAIC,KAAK,GAAGN,MAAM,CAAClB,IAAP,CAAY,IAAZ,EAAkBmB,IAAlB,KAA2B,IAAvC;IACA;AACR;AACA;AACA;AACA;;;IACQK,KAAK,CAACJ,QAAN,GAAiBA,QAAjB;IACA;AACR;AACA;AACA;AACA;AACA;;IACQI,KAAK,CAACH,UAAN,GAAmBA,UAAnB;IACA;AACR;AACA;AACA;AACA;AACA;;IACQG,KAAK,CAACF,eAAN,GAAwBA,eAAxB;IACA;AACR;AACA;AACA;AACA;;IACQE,KAAK,CAACD,eAAN,GAAwBA,eAAxB;IACA,OAAOC,KAAP;EACH;;EACD,OAAOP,cAAP;AACH,CAxCmC,CAwClCV,KAxCkC,CAApC;;AAyCA,SAASU,cAAT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIQ,SAAS;AAAG;AAAe,UAAUP,MAAV,EAAkB;EAC7C7B,SAAS,CAACoC,SAAD,EAAYP,MAAZ,CAAT;EACA;AACJ;AACA;;;EACI,SAASO,SAAT,CAAmBC,WAAnB,EA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"},"metadata":{},"sourceType":"module"}