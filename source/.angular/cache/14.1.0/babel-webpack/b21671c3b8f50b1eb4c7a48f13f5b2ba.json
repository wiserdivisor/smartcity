{"ast":null,"code":"/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"../canvas.js\").BuilderType, typeof Builder>}\n */\n\nvar BATCH_CONSTRUCTORS = {\n  'Circle': PolygonBuilder,\n  'Default': Builder,\n  'Image': ImageBuilder,\n  'LineString': LineStringBuilder,\n  'Polygon': PolygonBuilder,\n  'Text': TextBuilder\n};\n\nvar BuilderGroup =\n/** @class */\nfunction () {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    this.maxExtent_ = maxExtent;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.pixelRatio_ = pixelRatio;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.resolution_ = resolution;\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"../canvas.js\").BuilderType, Builder>>}\n     */\n\n    this.buildersByZIndex_ = {};\n  }\n  /**\n   * @return {!Object<string, !Object<import(\"../canvas.js\").BuilderType, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n   */\n\n\n  BuilderGroup.prototype.finish = function () {\n    var builderInstructions = {};\n\n    for (var zKey in this.buildersByZIndex_) {\n      builderInstructions[zKey] = builderInstructions[zKey] || {};\n      var builders = this.buildersByZIndex_[zKey];\n\n      for (var builderKey in builders) {\n        var builderInstruction = builders[builderKey].finish();\n        builderInstructions[zKey][builderKey] = builderInstruction;\n      }\n    }\n\n    return builderInstructions;\n  };\n  /**\n   * @param {number|undefined} zIndex Z index.\n   * @param {import(\"../canvas.js\").BuilderType} builderType Replay type.\n   * @return {import(\"../VectorContext.js\").default} Replay.\n   */\n\n\n  BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n    var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    var replays = this.buildersByZIndex_[zIndexKey];\n\n    if (replays === undefined) {\n      replays = {};\n      this.buildersByZIndex_[zIndexKey] = replays;\n    }\n\n    var replay = replays[builderType];\n\n    if (replay === undefined) {\n      var Constructor = BATCH_CONSTRUCTORS[builderType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n      replays[builderType] = replay;\n    }\n\n    return replay;\n  };\n\n  return BuilderGroup;\n}();\n\nexport default BuilderGroup;","map":{"version":3,"names":["Builder","ImageBuilder","LineStringBuilder","PolygonBuilder","TextBuilder","BATCH_CONSTRUCTORS","BuilderGroup","tolerance","maxExtent","resolution","pixelRatio","tolerance_","maxExtent_","pixelRatio_","resolution_","buildersByZIndex_","prototype","finish","builderInstructions","zKey","builders","builderKey","builderInstruction","getBuilder","zIndex","builderType","zIndexKey","undefined","toString","replays","replay","Constructor"],"sources":["/home/asura/github/smartcity/source/node_modules/ol/render/canvas/BuilderGroup.js"],"sourcesContent":["/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"../canvas.js\").BuilderType, typeof Builder>}\n */\nvar BATCH_CONSTRUCTORS = {\n    'Circle': PolygonBuilder,\n    'Default': Builder,\n    'Image': ImageBuilder,\n    'LineString': LineStringBuilder,\n    'Polygon': PolygonBuilder,\n    'Text': TextBuilder,\n};\nvar BuilderGroup = /** @class */ (function () {\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.tolerance_ = tolerance;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        this.maxExtent_ = maxExtent;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.resolution_ = resolution;\n        /**\n         * @private\n         * @type {!Object<string, !Object<import(\"../canvas.js\").BuilderType, Builder>>}\n         */\n        this.buildersByZIndex_ = {};\n    }\n    /**\n     * @return {!Object<string, !Object<import(\"../canvas.js\").BuilderType, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n     */\n    BuilderGroup.prototype.finish = function () {\n        var builderInstructions = {};\n        for (var zKey in this.buildersByZIndex_) {\n            builderInstructions[zKey] = builderInstructions[zKey] || {};\n            var builders = this.buildersByZIndex_[zKey];\n            for (var builderKey in builders) {\n                var builderInstruction = builders[builderKey].finish();\n                builderInstructions[zKey][builderKey] = builderInstruction;\n            }\n        }\n        return builderInstructions;\n    };\n    /**\n     * @param {number|undefined} zIndex Z index.\n     * @param {import(\"../canvas.js\").BuilderType} builderType Replay type.\n     * @return {import(\"../VectorContext.js\").default} Replay.\n     */\n    BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n        var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n        var replays = this.buildersByZIndex_[zIndexKey];\n        if (replays === undefined) {\n            replays = {};\n            this.buildersByZIndex_[zIndexKey] = replays;\n        }\n        var replay = replays[builderType];\n        if (replay === undefined) {\n            var Constructor = BATCH_CONSTRUCTORS[builderType];\n            replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n            replays[builderType] = replay;\n        }\n        return replay;\n    };\n    return BuilderGroup;\n}());\nexport default BuilderGroup;\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,OAAP,MAAoB,cAApB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,iBAAP,MAA8B,wBAA9B;AACA,OAAOC,cAAP,MAA2B,qBAA3B;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA;AACA;AACA;;AACA,IAAIC,kBAAkB,GAAG;EACrB,UAAUF,cADW;EAErB,WAAWH,OAFU;EAGrB,SAASC,YAHY;EAIrB,cAAcC,iBAJO;EAKrB,WAAWC,cALU;EAMrB,QAAQC;AANa,CAAzB;;AAQA,IAAIE,YAAY;AAAG;AAAe,YAAY;EAC1C;AACJ;AACA;AACA;AACA;AACA;EACI,SAASA,YAAT,CAAsBC,SAAtB,EAAiCC,SAAjC,EAA4CC,UAA5C,EAAwDC,UAAxD,EAAoE;IAChE;AACR;AACA;AACA;IACQ,KAAKC,UAAL,GAAkBJ,SAAlB;IACA;AACR;AACA;AACA;;IACQ,KAAKK,UAAL,GAAkBJ,SAAlB;IACA;AACR;AACA;AACA;;IACQ,KAAKK,WAAL,GAAmBH,UAAnB;IACA;AACR;AACA;AACA;;IACQ,KAAKI,WAAL,GAAmBL,UAAnB;IACA;AACR;AACA;AACA;;IACQ,KAAKM,iBAAL,GAAyB,EAAzB;EACH;EACD;AACJ;AACA;;;EACIT,YAAY,CAACU,SAAb,CAAuBC,MAAvB,GAAgC,YAAY;IACxC,IAAIC,mBAAmB,GAAG,EAA1B;;IACA,KAAK,IAAIC,IAAT,IAAiB,KAAKJ,iBAAtB,EAAyC;MACrCG,mBAAmB,CAACC,IAAD,CAAnB,GAA4BD,mBAAmB,CAACC,IAAD,CAAnB,IAA6B,EAAzD;MACA,IAAIC,QAAQ,GAAG,KAAKL,iBAAL,CAAuBI,IAAvB,CAAf;;MACA,KAAK,IAAIE,UAAT,IAAuBD,QAAvB,EAAiC;QAC7B,IAAIE,kBAAkB,GAAGF,QAAQ,CAACC,UAAD,CAAR,CAAqBJ,MAArB,EAAzB;QACAC,mBAAmB,CAACC,IAAD,CAAnB,CAA0BE,UAA1B,IAAwCC,kBAAxC;MACH;IACJ;;IACD,OAAOJ,mBAAP;EACH,CAXD;EAYA;AACJ;AACA;AACA;AACA;;;EACIZ,YAAY,CAACU,SAAb,CAAuBO,UAAvB,GAAoC,UAAUC,MAAV,EAAkBC,WAAlB,EAA+B;IAC/D,IAAIC,SAAS,GAAGF,MAAM,KAAKG,SAAX,GAAuBH,MAAM,CAACI,QAAP,EAAvB,GAA2C,GAA3D;IACA,IAAIC,OAAO,GAAG,KAAKd,iBAAL,CAAuBW,SAAvB,CAAd;;IACA,IAAIG,OAAO,KAAKF,SAAhB,EAA2B;MACvBE,OAAO,GAAG,EAAV;MACA,KAAKd,iBAAL,CAAuBW,SAAvB,IAAoCG,OAApC;IACH;;IACD,IAAIC,MAAM,GAAGD,OAAO,CAACJ,WAAD,CAApB;;IACA,IAAIK,MAAM,KAAKH,SAAf,EAA0B;MACtB,IAAII,WAAW,GAAG1B,kBAAkB,CAACoB,WAAD,CAApC;MACAK,MAAM,GAAG,IAAIC,WAAJ,CAAgB,KAAKpB,UAArB,EAAiC,KAAKC,UAAtC,EAAkD,KAAKE,WAAvD,EAAoE,KAAKD,WAAzE,CAAT;MACAgB,OAAO,CAACJ,WAAD,CAAP,GAAuBK,MAAvB;IACH;;IACD,OAAOA,MAAP;EACH,CAdD;;EAeA,OAAOxB,YAAP;AACH,CAtEiC,EAAlC;;AAuEA,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}